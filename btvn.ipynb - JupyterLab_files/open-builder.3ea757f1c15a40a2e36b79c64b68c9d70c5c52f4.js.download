var createAppcues=function(){"use strict";var t,e,n,r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};function i(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function o(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function s(t,e,n){if(2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}(e=t||(t={})).Start="xstate.start",e.Stop="xstate.stop",e.Raise="xstate.raise",e.Send="xstate.send",e.Cancel="xstate.cancel",e.NullEvent="",e.Assign="xstate.assign",e.After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.Log="xstate.log",e.Init="xstate.init",e.Invoke="xstate.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e.Update="xstate.update",e.Pure="xstate.pure",e.Choose="xstate.choose",function(t){t.Parent="#_parent",t.Internal="#_internal"}(n||(n={}));var c=t.Start,u=t.Stop,l=t.Raise,d=t.Send,f=t.Cancel,p=t.NullEvent,h=t.Assign;t.After,t.DoneState;var v=t.Log,y=t.Init,g=t.Invoke;t.ErrorExecution;var m,b=t.ErrorPlatform,E=t.ErrorCustom,x=t.Update,w=t.Choose,S=t.Pure,_={},T="xstate.guard";function O(t,e,n){void 0===n&&(n=".");var r=C(t,n),i=C(e,n);return q(i)?!!q(r)&&i===r:q(r)?r in i:Object.keys(r).every((function(t){return t in i&&O(r[t],i[t])}))}function R(t){try{return q(t)||"number"==typeof t?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function k(t,e){try{return B(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function C(t,e){return function(t){return"object"==typeof t&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}(t)?t.value:B(t)?A(t):"string"!=typeof t?t:A(k(t,e))}function A(t){if(1===t.length)return t[0];for(var e={},n=e,r=0;r<t.length-1;r++)r===t.length-2?n[t[r]]=t[r+1]:(n[t[r]]={},n=n[t[r]]);return e}function N(t,e){for(var n={},r=Object.keys(t),i=0;i<r.length;i++){var o=r[i];n[o]=e(t[o],o,t,i)}return n}function I(t,e,n){var r,i,a={};try{for(var s=o(Object.keys(t)),c=s.next();!c.done;c=s.next()){var u=c.value,l=t[u];n(l)&&(a[u]=e(l,u,t))}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a}var j=function(t){return function(e){var n,r,i=e;try{for(var a=o(t),s=a.next();!s.done;s=a.next()){i=i[s.value]}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}};function P(t){return t?q(t)?[[t]]:D(Object.keys(t).map((function(e){var n=t[e];return"string"==typeof n||n&&Object.keys(n).length?P(t[e]).map((function(t){return[e].concat(t)})):[[e]]}))):[[]]}function D(t){var e;return(e=[]).concat.apply(e,s([],a(t),!1))}function H(t){return B(t)?t:[t]}function L(t){return void 0===t?[]:H(t)}function $(t,e,n){var r,i;if(W(t))return t(e,n.data);var a={};try{for(var s=o(Object.keys(t)),c=s.next();!c.done;c=s.next()){var u=c.value,l=t[u];W(l)?a[u]=l(e,n.data):a[u]=l}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a}function M(t){return!!(t instanceof Promise||null!==t&&(W(t)||"object"==typeof t)&&W(t.then))}function z(t,e){var n,r,i=a([[],[]],2),s=i[0],c=i[1];try{for(var u=o(t),l=u.next();!l.done;l=u.next()){var d=l.value;e(d)?s.push(d):c.push(d)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return[s,c]}function V(t,e){return N(t.states,(function(t,n){if(t){var r=(q(e)?void 0:e[n])||(t?t.current:void 0);if(r)return{current:r,states:V(t,r)}}}))}function U(t,e){return{current:e,states:V(t,e)}}function F(t,e,n,r){return t&&n.reduce((function(t,n){var i,a,s=n.assignment,c={state:r,action:n,_event:e},u={};if(W(s))u=s(t,e.data,c);else try{for(var l=o(Object.keys(s)),d=l.next();!d.done;d=l.next()){var f=d.value,p=s[f];u[f]=W(p)?p(t,e.data,c):p}}catch(t){i={error:t}}finally{try{d&&!d.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return Object.assign({},t,u)}),t)}function B(t){return Array.isArray(t)}function W(t){return"function"==typeof t}function q(t){return"string"==typeof t}function X(t,e){if(t)return q(t)?{type:T,name:t,predicate:e?e[t]:void 0}:W(t)?{type:T,name:t.name,predicate:t}:t}var G="function"==typeof Symbol&&Symbol.observable||"@@observable";function K(t){return!!t&&"__xstatenode"in t}(m={})[G]=function(){return this},m[Symbol.observable]=function(){return this};var J=function(){var t=0;return function(){return(++t).toString(16)}}();function Z(t,e){return q(t)||"number"==typeof t?r({type:t},e):t}function Y(t,e){if(!q(t)&&"$$type"in t&&"scxml"===t.$$type)return t;var n=Z(t);return r({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function Q(t,e){return H(e).map((function(e){return typeof e>"u"||"string"==typeof e||K(e)?{target:e,event:t}:r(r({},e),{event:t})}))}function tt(t,e,n,r,i){var o=t.options.guards,a={state:i,cond:e,_event:r};if(e.type===T)return(o?.[e.name]||e.predicate)(n,r.data,a);var s=o?.[e.type];if(!s)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return s(n,r.data,a)}function et(t){return"string"==typeof t?{type:t}:t}function nt(t,e,n){if("object"==typeof t)return t;var r=function(){};return{next:t,error:e||r,complete:n||r}}function rt(t,e){return"".concat(t,":invocation[").concat(e,"]")}var it=Y({type:y});function ot(t,e){return e&&e[t]||void 0}function at(t,e){var n;if(q(t)||"number"==typeof t)n=W(i=ot(t,e))?{type:t,exec:i}:i||{type:t,exec:void 0};else if(W(t))n={type:t.name||t.toString(),exec:t};else{var i;if(W(i=ot(t.type,e)))n=r(r({},t),{exec:i});else if(i){var o=i.type||t.type;n=r(r(r({},i),t),{type:o})}else n=t}return n}var st=function(t,e){return t?(B(t)?t:[t]).map((function(t){return at(t,e)})):[]};function ct(t){var e=at(t);return r(r({id:q(t)?t:e.id},e),{type:e.type})}function ut(t){return q(t)?{type:l,event:t}:lt(t,{to:n.Internal})}function lt(t,e){return{to:e?e.to:void 0,type:d,event:W(t)?t:Z(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:W(t)?t.name:R(t)}}function dt(e,n){var r="".concat(t.DoneState,".").concat(e),i={type:r,data:n,toString:function(){return r}};return i}function ft(e,n){var r="".concat(t.DoneInvoke,".").concat(e),i={type:r,data:n,toString:function(){return r}};return i}function pt(e,n){var r="".concat(t.ErrorPlatform,".").concat(e),i={type:r,data:n,toString:function(){return r}};return i}function ht(e){return{type:t.Choose,conds:e}}function vt(e,n,i,o,c,f){void 0===f&&(f=!1);var p=a(f?[[],c]:z(c,(function(t){return t.type===h})),2),y=p[0],g=p[1],m=y.length?F(i,o,y,n):i,b=f?[i]:void 0,E=D(g.map((function(i){var c;switch(i.type){case l:return function(t){return{type:l,_event:Y(t.event)}}(i);case d:var p=function(t,e,n,i){var o,a={_event:n},s=Y(W(t.event)?t.event(e,n.data,a):t.event);if(q(t.delay)){var c=i&&i[t.delay];o=W(c)?c(e,n.data,a):c}else o=W(t.delay)?t.delay(e,n.data,a):t.delay;var u=W(t.to)?t.to(e,n.data,a):t.to;return r(r({},t),{to:u,_event:s,event:s.data,delay:o})}(i,m,o,e.options.delays);return p;case v:return function(t,e,n){return r(r({},t),{value:q(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})}(i,m,o);case w:if(!(x=null===(c=i.conds.find((function(t){var r=X(t.cond,e.options.guards);return!r||tt(e,r,m,o,n)})))||void 0===c?void 0:c.actions))return[];var y=a(vt(e,n,m,o,st(L(x),e.options.actions),f),2),g=y[0],E=y[1];return m=E,b?.push(m),g;case S:var x;if(!(x=i.get(m,o.data)))return[];var _=a(vt(e,n,m,o,st(L(x),e.options.actions),f),2),T=_[0],O=_[1];return m=O,b?.push(m),T;case u:return function(e,n,r){var i=W(e.activity)?e.activity(n,r.data):e.activity,o="string"==typeof i?{id:i}:i;return{type:t.Stop,activity:o}}(i,m,o);case h:m=F(m,o,[i],n),b?.push(m);break;default:var R=at(i,e.options.actions),k=R.exec;if(k&&b){var C=b.length-1;R=r(r({},R),{exec:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];k.apply(void 0,s([b[C]],a(e),!1))}})}return R}})).filter((function(t){return!!t})));return[E,m]}var yt=[],gt=function(t,e){yt.push(t);var n=e(t);return yt.pop(),n};function mt(t){var e;return(e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}})[G]=function(){return this},e}function bt(t,e,n){var r=mt(e);if(r.deferred=!0,K(t)){var i=r.state=gt(void 0,(function(){return(n?t.withContext(n):t).initialState}));r.getSnapshot=function(){return i}}return r}var Et=function(t){return"atomic"===t.type||"final"===t.type};function xt(t){return Object.keys(t.states).map((function(e){return t.states[e]})).filter((function(t){return"history"!==t.type}))}function wt(t){var e=[t];return Et(t)?e:e.concat(D(xt(t).map(wt)))}function St(t,e){var n,r,i,a,s,c,u,l,d=Tt(new Set(t)),f=new Set(e);try{for(var p=o(f),h=p.next();!h.done;h=p.next())for(var v=(_=h.value).parent;v&&!f.has(v);)f.add(v),v=v.parent}catch(t){n={error:t}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}var y=Tt(f);try{for(var g=o(f),m=g.next();!m.done;m=g.next()){if("compound"!==(_=m.value).type||y.get(_)&&y.get(_).length){if("parallel"===_.type)try{for(var b=(s=void 0,o(xt(_))),E=b.next();!E.done;E=b.next()){var x=E.value;f.has(x)||(f.add(x),d.get(x)?d.get(x).forEach((function(t){return f.add(t)})):x.initialStateNodes.forEach((function(t){return f.add(t)})))}}catch(t){s={error:t}}finally{try{E&&!E.done&&(c=b.return)&&c.call(b)}finally{if(s)throw s.error}}}else d.get(_)?d.get(_).forEach((function(t){return f.add(t)})):_.initialStateNodes.forEach((function(t){return f.add(t)}))}}catch(t){i={error:t}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}try{for(var w=o(f),S=w.next();!S.done;S=w.next()){var _;for(v=(_=S.value).parent;v&&!f.has(v);)f.add(v),v=v.parent}}catch(t){u={error:t}}finally{try{S&&!S.done&&(l=w.return)&&l.call(w)}finally{if(u)throw u.error}}return f}function _t(t,e){var n=e.get(t);if(!n)return{};if("compound"===t.type){var r=n[0];if(!r)return{};if(Et(r))return r.key}var i={};return n.forEach((function(t){i[t.key]=_t(t,e)})),i}function Tt(t){var e,n,r=new Map;try{for(var i=o(t),a=i.next();!a.done;a=i.next()){var s=a.value;r.has(s)||r.set(s,[]),s.parent&&(r.has(s.parent)||r.set(s.parent,[]),r.get(s.parent).push(s))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Ot(t,e){return _t(t,Tt(St([t],e)))}function Rt(t,e){return Array.isArray(t)?t.some((function(t){return t===e})):t instanceof Set&&t.has(e)}function kt(t,e){return"compound"===e.type?xt(e).some((function(e){return"final"===e.type&&Rt(t,e)})):"parallel"===e.type&&xt(e).every((function(e){return kt(t,e)}))}function Ct(t){return new Set(D(t.map((function(t){return t.tags}))))}function At(t,e){if(t===e)return!0;if(void 0===t||void 0===e)return!1;if(q(t)||q(e))return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every((function(n){return At(t[n],e[n])}))}var Nt=function(){function t(t){var e,n=this;this.actions=[],this.activities=_,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||_,this.meta=function(t){return void 0===t&&(t=[]),t.reduce((function(t,e){return void 0!==e.meta&&(t[e.id]=e.meta),t}),{})}(t.configuration),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=null!==(e=Array.isArray(t.tags)?new Set(t.tags):t.tags)&&void 0!==e?e:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return function(t){return s([],a(new Set(D(s([],a(t.map((function(t){return t.ownEvents}))),!1)))),!1)}(n.configuration)}})}return t.from=function(e,n){return e instanceof t?e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e:new t({value:e,context:n,_event:it,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var r=it;return new t({value:e.value,context:n,_event:r,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(t,e){var n=this;if(void 0===t&&(t=this.value),void 0===e&&(e="."),q(t))return[t];var r=Object.keys(t);return r.concat.apply(r,s([],a(r.map((function(r){return n.toStrings(t[r],e).map((function(t){return r+e+t}))}))),!1))},t.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var e=t.tags;t.machine;var n=i(t,["configuration","transitions","tags","machine"]);return r(r({},n),{tags:Array.from(e)})},t.prototype.matches=function(t){return O(t,this.value)},t.prototype.hasTag=function(t){return this.tags.has(t)},t.prototype.can=function(t){var e;this.machine;var n=null===(e=this.machine)||void 0===e?void 0:e.getTransitionData(this,t);return!!n?.transitions.length&&n.transitions.some((function(t){return void 0!==t.target||t.actions.length}))},t}(),It={deferEvents:!1},jt=function(){function t(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=r(r({},It),t)}return t.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents)return void this.schedule(t);this.process(t)}this.flushEvents()},t.prototype.schedule=function(t){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()}else this.queue.push(t)},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},t.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(t){throw this.clear(),t}finally{this.processingEvent=!1}},t}(),Pt=new Map,Dt=0,Ht=function(){return"x:".concat(Dt++)},Lt=function(t,e){return Pt.set(t,e),t},$t=function(t){return Pt.get(t)},Mt=function(t){Pt.delete(t)};function zt(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:void 0}function Vt(t){if(zt()){var e=function(){var t=zt();if(t&&"__xstate__"in t)return t.__xstate__}();e&&e.register(t)}}function Ut(t,e){void 0===e&&(e={});var n=t.initialState,i=new Set,o=[],a=!1,s=function(t){var e;return r(((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}})[G]=function(){return this},e),t)}({id:e.id,send:function(e){o.push(e),function(){if(!a){for(a=!0;o.length>0;){var e=o.shift();n=t.transition(n,e,c),i.forEach((function(t){return t.next(n)}))}a=!1}}()},getSnapshot:function(){return n},subscribe:function(t,e,r){var o=nt(t,e,r);return i.add(o),o.next(n),{unsubscribe:function(){i.delete(o)}}}}),c={parent:e.parent,self:s,id:e.id||"anonymous",observers:i};return n=t.start?t.start(c):n,s}var Ft,Bt={sync:!1,autoForward:!1};!function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"}(Ft||(Ft={}));var Wt=function(){function e(t,i){var o=this;void 0===i&&(i=e.defaultOptions),this.machine=t,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Ft.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(t,e){if(B(t))return o.batch(t),o.state;var n=Y(Z(t,e));if(o.status===Ft.Stopped)return o.state;if(o.status!==Ft.Running&&!o.options.deferEvents)throw new Error('Event "'.concat(n.name,'" was sent to uninitialized service "').concat(o.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: ').concat(JSON.stringify(n.data)));return o.scheduler.schedule((function(){o.forward(n);var t=o.nextState(n);o.update(t,n)})),o._state},this.sendTo=function(t,e){var i=o.parent&&(e===n.Parent||o.parent.id===e),a=i?o.parent:q(e)?o.children.get(e)||$t(e):function(t){return!!t&&"function"==typeof t.send}(e)?e:void 0;if(a)"machine"in a?a.send(r(r({},t),{name:t.name===E?"".concat(pt(o.id)):t.name,origin:o.sessionId})):a.send(t.data);else if(!i)throw new Error("Unable to send event to child '".concat(e,"' from service '").concat(o.id,"'."))};var a=r(r({},e.defaultOptions),i),s=a.clock,c=a.logger,u=a.parent,l=a.id,d=void 0!==l?l:t.id;this.id=d,this.logger=c,this.clock=s,this.parent=u,this.options=a,this.scheduler=new jt({deferEvents:this.options.deferEvents}),this.sessionId=Ht()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:gt(this,(function(){return t._initialState=t.machine.initialState,t._initialState}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(t,e){var n,r;try{for(var i=o(t.actions),a=i.next();!a.done;a=i.next()){var s=a.value;this.exec(s,t,e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.update=function(t,e){var n,r,i,a,s,c,u,l,d=this;if(t._sessionid=this.sessionId,this._state=t,this.options.execute&&this.execute(this.state),this.children.forEach((function(t){d.state.children[t.id]=t})),this.devTools&&this.devTools.send(e.data,t),t.event)try{for(var f=o(this.eventListeners),p=f.next();!p.done;p=f.next()){(0,p.value)(t.event)}}catch(t){n={error:t}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}try{for(var h=o(this.listeners),v=h.next();!v.done;v=h.next()){(0,v.value)(t,t.event)}}catch(t){i={error:t}}finally{try{v&&!v.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}try{for(var y=o(this.contextListeners),g=y.next();!g.done;g=y.next()){(0,g.value)(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(t){s={error:t}}finally{try{g&&!g.done&&(c=y.return)&&c.call(y)}finally{if(s)throw s.error}}var m=kt(t.configuration||[],this.machine);if(this.state.configuration&&m){var b=t.configuration.find((function(t){return"final"===t.type&&t.parent===d.machine})),E=b&&b.doneData?$(b.doneData,t.context,e):void 0;try{for(var x=o(this.doneListeners),w=x.next();!w.done;w=x.next()){(0,w.value)(ft(this.id,E))}}catch(t){u={error:t}}finally{try{w&&!w.done&&(l=x.return)&&l.call(x)}finally{if(u)throw u.error}}this.stop()}},e.prototype.onTransition=function(t){return this.listeners.add(t),this.status===Ft.Running&&t(this.state,this.state.event),this},e.prototype.subscribe=function(t,e,n){var r=this;if(!t)return{unsubscribe:function(){}};var i,o=n;return"function"==typeof t?i=t:(i=t.next.bind(t),o=t.complete.bind(t)),this.listeners.add(i),this.status!==Ft.NotStarted&&i(this.state),o&&(this.status===Ft.Stopped?o():this.onDone(o)),{unsubscribe:function(){i&&r.listeners.delete(i),o&&r.doneListeners.delete(o)}}},e.prototype.onEvent=function(t){return this.eventListeners.add(t),this},e.prototype.onSend=function(t){return this.sendListeners.add(t),this},e.prototype.onChange=function(t){return this.contextListeners.add(t),this},e.prototype.onStop=function(t){return this.stopListeners.add(t),this},e.prototype.onDone=function(t){return this.doneListeners.add(t),this},e.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},e.prototype.start=function(t){var e=this;if(this.status===Ft.Running)return this;this.machine._init(),Lt(this.sessionId,this),this.initialized=!0,this.status=Ft.Running;var n=void 0===t?this.initialState:gt(this,(function(){return function(t){return"object"==typeof t&&null!==t&&"value"in t&&"_event"in t}(t)?e.machine.resolveState(t):e.machine.resolveState(Nt.from(t,e.machine.context))}));return this.options.devTools&&this.attachDev(),this.scheduler.initialize((function(){e.update(n,it)})),this},e.prototype.stop=function(){var t,e,n,r,i,c,u,l,d,f,p=this;try{for(var h=o(this.listeners),v=h.next();!v.done;v=h.next()){var y=v.value;this.listeners.delete(y)}}catch(e){t={error:e}}finally{try{v&&!v.done&&(e=h.return)&&e.call(h)}finally{if(t)throw t.error}}try{for(var g=o(this.stopListeners),m=g.next();!m.done;m=g.next()){(y=m.value)(),this.stopListeners.delete(y)}}catch(t){n={error:t}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}try{for(var b=o(this.contextListeners),E=b.next();!E.done;E=b.next()){y=E.value;this.contextListeners.delete(y)}}catch(t){i={error:t}}finally{try{E&&!E.done&&(c=b.return)&&c.call(b)}finally{if(i)throw i.error}}try{for(var x=o(this.doneListeners),w=x.next();!w.done;w=x.next()){y=w.value;this.doneListeners.delete(y)}}catch(t){u={error:t}}finally{try{w&&!w.done&&(l=x.return)&&l.call(x)}finally{if(u)throw u.error}}if(!this.initialized)return this;s([],a(this.state.configuration),!1).sort((function(t,e){return e.order-t.order})).forEach((function(t){var e,n;try{for(var r=o(t.definition.exit),i=r.next();!i.done;i=r.next()){var a=i.value;p.exec(a,p.state)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}})),this.children.forEach((function(t){W(t.stop)&&t.stop()})),this.children.clear();try{for(var S=o(Object.keys(this.delayedEventsMap)),_=S.next();!_.done;_=S.next()){var T=_.value;this.clock.clearTimeout(this.delayedEventsMap[T])}}catch(t){d={error:t}}finally{try{_&&!_.done&&(f=S.return)&&f.call(S)}finally{if(d)throw d.error}}return this.scheduler.clear(),this.scheduler=new jt({deferEvents:this.options.deferEvents}),this.initialized=!1,this.status=Ft.Stopped,this._initialState=void 0,Mt(this.sessionId),this},e.prototype.batch=function(t){var e=this;if((this.status!==Ft.NotStarted||!this.options.deferEvents)&&this.status!==Ft.Running)throw new Error("".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));this.scheduler.schedule((function(){var n,i,c=e.state,u=!1,l=[],d=function(t){var n=Y(t);e.forward(n),c=gt(e,(function(){return e.machine.transition(c,n)})),l.push.apply(l,s([],a(c.actions.map((function(t){return function(t,e){var n=t.exec;return r(r({},t),{exec:void 0!==n?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0})}(t,c)}))),!1)),u=u||!!c.changed};try{for(var f=o(t),p=f.next();!p.done;p=f.next()){d(p.value)}}catch(t){n={error:t}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}c.changed=u,c.actions=l,e.update(c,Y(t[t.length-1]))}))},e.prototype.sender=function(t){return this.send.bind(this,t)},e.prototype.nextState=function(t){var e=this,n=Y(t);if(0===n.name.indexOf(b)&&!this.state.nextEvents.some((function(t){return 0===t.indexOf(b)})))throw n.data.data;return gt(this,(function(){return e.machine.transition(e.state,n)}))},e.prototype.forward=function(t){var e,n;try{for(var r=o(this.forwardTo),i=r.next();!i.done;i=r.next()){var a=i.value,s=this.children.get(a);if(!s)throw new Error("Unable to forward event '".concat(t,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(a,"'."));s.send(t)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},e.prototype.defer=function(t){var e=this;this.delayedEventsMap[t.id]=this.clock.setTimeout((function(){t.to?e.sendTo(t._event,t.to):e.send(t._event)}),t.delay)},e.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},e.prototype.exec=function(e,n,r){void 0===r&&(r=this.machine.options.actions);var i=n.context,o=n._event,a=e.exec||ot(e.type,r),s=W(a)?a:a?a.exec:e.exec;if(s)try{return s(i,o.data,{action:e,state:this.state,_event:o})}catch(t){throw this.parent&&this.parent.send({type:"xstate.error",data:t}),t}switch(e.type){case d:var l=e;if("number"==typeof l.delay)return void this.defer(l);l.to?this.sendTo(l._event,l.to):this.send(l._event);break;case f:this.cancel(e.sendId);break;case c:if(this.status!==Ft.Running)return;var p=e.activity;if(!this.state.activities[p.id||p.type])break;if(p.type===t.Invoke){var h=et(p.src),y=this.machine.options.services?this.machine.options.services[h.type]:void 0,g=p.id,m=p.data,b="autoForward"in p?p.autoForward:!!p.forward;if(!y)return;var E=m?$(m,i,o):void 0;if("string"==typeof y)return;var x=W(y)?y(i,o.data,{data:E,src:h,meta:p.meta}):y;if(!x)return;var w=void 0;K(x)&&(x=E?x.withContext(E):x,w={autoForward:b}),this.spawn(x,g,w)}else this.spawnActivity(p);break;case u:this.stopChild(e.activity.id);break;case v:var S=e.label,_=e.value;S?this.logger(S,_):this.logger(_)}},e.prototype.removeChild=function(t){var e;this.children.delete(t),this.forwardTo.delete(t),null===(e=this.state)||void 0===e||delete e.children[t]},e.prototype.stopChild=function(t){var e=this.children.get(t);e&&(this.removeChild(t),W(e.stop)&&e.stop())},e.prototype.spawn=function(t,e,n){if(M(t))return this.spawnPromise(Promise.resolve(t),e);if(W(t))return this.spawnCallback(t,e);if(function(t){return function(t){try{return"function"==typeof t.send}catch{return!1}}(t)&&"id"in t}(t))return this.spawnActor(t,e);if(function(t){try{return"subscribe"in t&&W(t.subscribe)}catch{return!1}}(t))return this.spawnObservable(t,e);if(K(t))return this.spawnMachine(t,r(r({},n),{id:e}));if(function(t){return null!==t&&"object"==typeof t&&"transition"in t&&"function"==typeof t.transition}(t))return this.spawnBehavior(t,e);throw new Error('Unable to spawn entity "'.concat(e,'" of type "').concat(typeof t,'".'))},e.prototype.spawnMachine=function(t,n){var i=this;void 0===n&&(n={});var o=new e(t,r(r({},this.options),{parent:this,id:n.id||t.id})),a=r(r({},Bt),n);a.sync&&o.onTransition((function(t){i.send(x,{state:t,id:o.id})}));var s=o;return this.children.set(o.id,s),a.autoForward&&this.forwardTo.add(o.id),o.onDone((function(t){i.removeChild(o.id),i.send(Y(t,{origin:o.id}))})).start(),s},e.prototype.spawnBehavior=function(t,e){var n=Ut(t,{id:e,parent:this});return this.children.set(e,n),n},e.prototype.spawnPromise=function(t,e){var n,r,i=this,o=!1;t.then((function(t){o||(r=t,i.removeChild(e),i.send(Y(ft(e,t),{origin:e})))}),(function(t){if(!o){i.removeChild(e);var n=pt(e,t);try{i.send(Y(n,{origin:e}))}catch{i.devTools&&i.devTools.send(n,i.state),i.machine.strict&&i.stop()}}}));var a=((n={id:e,send:function(){},subscribe:function(e,n,r){var i=nt(e,n,r),o=!1;return t.then((function(t){o||(i.next(t),!o&&i.complete())}),(function(t){o||i.error(t)})),{unsubscribe:function(){return o=!0}}},stop:function(){o=!0},toJSON:function(){return{id:e}},getSnapshot:function(){return r}})[G]=function(){return this},n);return this.children.set(e,a),a},e.prototype.spawnCallback=function(t,e){var n,r,i,o=this,a=!1,s=new Set,c=new Set;try{i=t((function(t){r=t,c.forEach((function(e){return e(t)})),!a&&o.send(Y(t,{origin:e}))}),(function(t){s.add(t)}))}catch(t){this.send(pt(e,t))}if(M(i))return this.spawnPromise(i,e);var u=((n={id:e,send:function(t){return s.forEach((function(e){return e(t)}))},subscribe:function(t){var e=nt(t);return c.add(e.next),{unsubscribe:function(){c.delete(e.next)}}},stop:function(){a=!0,W(i)&&i()},toJSON:function(){return{id:e}},getSnapshot:function(){return r}})[G]=function(){return this},n);return this.children.set(e,u),u},e.prototype.spawnObservable=function(t,e){var n,r,i=this,o=t.subscribe((function(t){r=t,i.send(Y(t,{origin:e}))}),(function(t){i.removeChild(e),i.send(Y(pt(e,t),{origin:e}))}),(function(){i.removeChild(e),i.send(Y(ft(e),{origin:e}))})),a=((n={id:e,send:function(){},subscribe:function(e,n,r){return t.subscribe(e,n,r)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return r},toJSON:function(){return{id:e}}})[G]=function(){return this},n);return this.children.set(e,a),a},e.prototype.spawnActor=function(t,e){return this.children.set(e,t),t},e.prototype.spawnActivity=function(t){var e=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(e){var n=e(this.state.context,t);this.spawnEffect(t.id,n)}},e.prototype.spawnEffect=function(t,e){var n;this.children.set(t,((n={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:e||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}})[G]=function(){return this},n))},e.prototype.attachDev=function(){var t=zt();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var e="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect(r(r({name:this.id,autoPause:!0,stateSanitizer:function(t){return{value:t.value,context:t.context,actions:t.actions}}},e),{features:r({jump:!1,skip:!1},e?e.features:void 0)}),this.machine),this.devTools.init(this.state)}Vt(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[G]=function(){return this},e.prototype.getSnapshot=function(){return this.status===Ft.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(t,e){return setTimeout(t,e)},clearTimeout:function(t){return clearTimeout(t)}},logger:function(){}.bind(),devTools:!1},e.interpret=Xt,e}();function qt(t,e){var n=function(t){return q(t)?r(r({},Bt),{name:t}):r(r(r({},Bt),{name:J()}),t)}(e);return function(t){return t(yt[yt.length-1])}((function(e){return e?e.spawn(t,n.name,n):bt(t,n.name)}))}function Xt(t,e){return new Wt(t,e)}function Gt(t){if("string"==typeof t){var e={type:t,toString:function(){return t}};return e}return t}function Kt(t){return r(r({type:g},t),{toJSON:function(){t.onDone,t.onError;var e=i(t,["onDone","onError"]);return r(r({},e),{type:g,src:Gt(t.src)})}})}var Jt={},Zt=function(t){return"#"===t[0]},Yt=function(){function e(t,n,i,c){var u,l=this;void 0===i&&(i="context"in t?t.context:void 0),this.config=t,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign({actions:{},guards:{},services:{},activities:{},delays:{}},n),this.parent=c?.parent,this.key=this.config.key||c?.key||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:"."),this.id=this.config.id||s([this.machine.key],a(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(u=this.config.schema)&&void 0!==u?u:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?N(this.config.states,(function(t,n){var i,o=new e(t,{},void 0,{parent:l,key:n});return Object.assign(l.idMap,r(((i={})[o.id]=o,i),o.idMap)),o})):Jt;var d=0;(function t(e){var n,r;e.order=d++;try{for(var i=o(xt(e)),a=i.next();!a.done;a=i.next()){t(a.value)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}})(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some((function(t){return""===t.event})):""in this.config.on),this.strict=!!this.config.strict,this.onEntry=L(this.config.entry||this.config.onEntry).map((function(t){return at(t)})),this.onExit=L(this.config.exit||this.config.onExit).map((function(t){return at(t)})),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=L(this.config.invoke).map((function(t,e){var n,i;if(K(t)){var o=rt(l.id,e);return l.machine.options.services=r(((n={})[o]=t,n),l.machine.options.services),Kt({src:o,id:o})}if(q(t.src)){o=t.id||rt(l.id,e);return Kt(r(r({},t),{id:o,src:t.src}))}if(K(t.src)||W(t.src)){o=t.id||rt(l.id,e);return l.machine.options.services=r(((i={})[o]=t.src,i),l.machine.options.services),Kt(r(r({id:o},t),{src:o}))}var a=t.src;return Kt(r(r({id:rt(l.id,e)},t),{src:a}))})),this.activities=L(this.config.activities).concat(this.invoke).map((function(t){return ct(t)})),this.transition=this.transition.bind(this),this.tags=L(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||wt(this).forEach((function(t){return t.on}))},e.prototype.withConfig=function(t,n){var i=this.options,o=i.actions,a=i.activities,s=i.guards,c=i.services,u=i.delays;return new e(this.config,{actions:r(r({},o),t.actions),activities:r(r({},a),t.activities),guards:r(r({},s),t.guards),services:r(r({},c),t.services),delays:r(r({},u),t.delays)},n??this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return W(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:N(this.states,(function(t){return t.definition})),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce((function(t,e){return t[e.eventType]=t[e.eventType]||[],t[e.eventType].push(e),t}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var e=""===t,n=this.transitions.filter((function(n){var r=n.eventType===t;return e?r:r||"*"===n.eventType}));return this.__cache.candidates[t]=n,n},e.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var i=function(n,r){var i=function(e,n){var r=n?"#".concat(n):"";return"".concat(t.After,"(").concat(e,")").concat(r)}(W(n)?"".concat(e.id,":delay[").concat(r,"]"):n,e.id);return e.onEntry.push(lt(i,{delay:n})),e.onExit.push(function(t){return{type:f,sendId:t}}(i)),i};return(B(n)?n.map((function(t,e){var n=i(t.delay,e);return r(r({},t),{event:n})})):D(Object.keys(n).map((function(t,e){var o=n[t],a=q(o)?{target:o}:o,s=isNaN(+t)?t:+t,c=i(s,e);return L(a).map((function(t){return r(r({},t),{event:c,delay:s})}))})))).map((function(t){var n=t.delay;return r(r({},e.formatTransition(t)),{delay:n})}))},e.prototype.getStateNodes=function(t){var e,n=this;if(!t)return[];var r=t instanceof Nt?t.value:C(t,this.delimiter);if(q(r)){var i=this.getStateNode(r).initial;return void 0!==i?this.getStateNodes(((e={})[r]=i,e)):[this,this.states[r]]}var o=Object.keys(r),c=[this];return c.push.apply(c,s([],a(D(o.map((function(t){return n.getStateNode(t).getStateNodes(r[t])})))),!1)),c},e.prototype.handles=function(t){var e=R(t);return this.events.includes(e)},e.prototype.resolveState=function(t){var e=t instanceof Nt?t:Nt.create(t),n=Array.from(St([],this.getStateNodes(e.value)));return new Nt(r(r({},e),{value:this.resolve(e.value),configuration:n,done:kt(n,this),tags:Ct(n),machine:this.machine}))},e.prototype.transitionLeafNode=function(t,e,n){var r=this.getStateNode(t).next(e,n);return r&&r.transitions.length?r:this.next(e,n)},e.prototype.transitionCompoundNode=function(t,e,n){var r=Object.keys(t),i=this.getStateNode(r[0])._transition(t[r[0]],e,n);return i&&i.transitions.length?i:this.next(e,n)},e.prototype.transitionParallelNode=function(t,e,n){var r,i,a={};try{for(var s=o(Object.keys(t)),c=s.next();!c.done;c=s.next()){var u=c.value,l=t[u];if(l){var d=this.getStateNode(u)._transition(l,e,n);d&&(a[u]=d)}}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}var f=Object.keys(a).map((function(t){return a[t]})),p=D(f.map((function(t){return t.transitions})));if(!f.some((function(t){return t.transitions.length>0})))return this.next(e,n);var h=D(f.map((function(t){return t.entrySet}))),v=D(Object.keys(a).map((function(t){return a[t].configuration})));return{transitions:p,entrySet:h,exitSet:D(f.map((function(t){return t.exitSet}))),configuration:v,source:e,actions:D(Object.keys(a).map((function(t){return a[t].actions})))}},e.prototype._transition=function(t,e,n){return q(t)?this.transitionLeafNode(t,e,n):1===Object.keys(t).length?this.transitionCompoundNode(t,e,n):this.transitionParallelNode(t,e,n)},e.prototype.getTransitionData=function(t,e){return this._transition(t.value,t,Y(e))},e.prototype.next=function(t,e){var n,r,i,c=this,u=e.name,l=[],d=[];try{for(var f=o(this.getCandidates(u)),p=f.next();!p.done;p=f.next()){var h=p.value,v=h.cond,y=h.in,g=t.context,m=!y||(q(y)&&Zt(y)?t.matches(C(this.getStateNodeById(y).path,this.delimiter)):O(C(y,this.delimiter),j(this.path.slice(0,-2))(t.value))),b=!1;try{b=!v||tt(this.machine,v,g,e,t)}catch(t){throw new Error("Unable to evaluate guard '".concat(v.name||v.type,"' in transition for event '").concat(u,"' in state node '").concat(this.id,"':\n").concat(t.message))}if(b&&m){void 0!==h.target&&(d=h.target),l.push.apply(l,s([],a(h.actions),!1)),i=h;break}}}catch(t){n={error:t}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}if(i){if(!d.length)return{transitions:[i],entrySet:[],exitSet:[],configuration:t.value?[this]:[],source:t,actions:l};var E=D(d.map((function(e){return c.getRelativeStateNodes(e,t.historyValue)}))),x=!!i.internal;return{transitions:[i],entrySet:x?[]:D(E.map((function(t){return c.nodesFromChild(t)}))),exitSet:x?[]:[this],configuration:E,source:t,actions:l}}},e.prototype.nodesFromChild=function(t){if(t.escapes(this))return[];for(var e=[],n=t;n&&n!==this;)e.push(n),n=n.parent;return e.push(this),e},e.prototype.escapes=function(t){if(this===t)return!1;for(var e=this.parent;e;){if(e===t)return!1;e=e.parent}return!0},e.prototype.getActions=function(e,n,r,i){var c,u,l,d,f=St([],i?this.getStateNodes(i.value):[this]),p=e.configuration.length?St(f,e.configuration):f;try{for(var h=o(p),v=h.next();!v.done;v=h.next()){Rt(f,m=v.value)||e.entrySet.push(m)}}catch(t){c={error:t}}finally{try{v&&!v.done&&(u=h.return)&&u.call(h)}finally{if(c)throw c.error}}try{for(var y=o(f),g=y.next();!g.done;g=y.next()){var m;(!Rt(p,m=g.value)||Rt(e.exitSet,m.parent))&&e.exitSet.push(m)}}catch(t){l={error:t}}finally{try{g&&!g.done&&(d=y.return)&&d.call(y)}finally{if(l)throw l.error}}var b=D(e.entrySet.map((function(t){var i=[];if("final"!==t.type)return i;var o=t.parent;if(!o.parent)return i;i.push(dt(t.id,t.doneData),dt(o.id,t.doneData?$(t.doneData,n,r):void 0));var a=o.parent;return"parallel"===a.type&&xt(a).every((function(t){return kt(e.configuration,t)}))&&i.push(dt(a.id)),i})));e.exitSet.sort((function(t,e){return e.order-t.order})),e.entrySet.sort((function(t,e){return t.order-e.order}));var E=new Set(e.entrySet),x=new Set(e.exitSet),w=a([D(Array.from(E).map((function(e){return s(s([],a(e.activities.map((function(e){return function(e){var n=ct(e);return{type:t.Start,activity:n,exec:void 0}}(e)}))),!1),a(e.onEntry),!1)}))).concat(b.map(ut)),D(Array.from(x).map((function(e){return s(s([],a(e.onExit),!1),a(e.activities.map((function(e){return function(e){var n=W(e)?e:ct(e);return{type:t.Stop,activity:n,exec:void 0}}(e)}))),!1)})))],2),S=w[0],_=w[1];return st(_.concat(e.actions).concat(S),this.machine.options.actions)},e.prototype.transition=function(t,e,n){void 0===t&&(t=this.initialState);var r,i=Y(e);if(t instanceof Nt)r=void 0===n?t:this.resolveState(Nt.from(t,n));else{var o=q(t)?this.resolve(A(this.getResolvedPath(t))):this.resolve(t),c=n??this.machine.context;r=this.resolveState(Nt.from(o,c))}if(this.strict&&!this.events.includes(i.name)&&!function(t){return/^(done|error)\./.test(t)}(i.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(i.name,"'"));var u=this._transition(r.value,r,i)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:r,actions:[]},l=St([],this.getStateNodes(r.value)),d=u.configuration.length?St(l,u.configuration):l;return u.configuration=s([],a(d),!1),this.resolveTransition(u,r,r.context,i)},e.prototype.resolveRaisedTransition=function(t,e,n){var r,i=t.actions;return(t=this.transition(t,e))._event=n,t.event=n.data,(r=t.actions).unshift.apply(r,s([],a(i),!1)),t},e.prototype.resolveTransition=function(t,e,i,s){var f,h,v=this;void 0===s&&(s=it);var y=t.configuration,m=!e||t.transitions.length>0,b=m?Ot(this.machine,y):void 0,E=e?e.historyValue?e.historyValue:t.source?this.machine.historyValue(e.value):void 0:void 0,w=this.getActions(t,i,s,e),S=e?r({},e.activities):{};try{for(var _=o(w),T=_.next();!T.done;T=_.next()){var O=T.value;O.type===c?S[O.activity.id||O.activity.type]=O:O.type===u&&(S[O.activity.id||O.activity.type]=!1)}}catch(t){f={error:t}}finally{try{T&&!T.done&&(h=_.return)&&h.call(_)}finally{if(f)throw f.error}}var R=a(vt(this,e,i,s,w,this.machine.config.preserveActionOrder),2),k=R[0],C=R[1],A=a(z(k,(function(t){return t.type===l||t.type===d&&t.to===n.Internal})),2),N=A[0],I=A[1],j=k.filter((function(t){var e;return t.type===c&&(null===(e=t.activity)||void 0===e?void 0:e.type)===g})).reduce((function(t,e){return t[e.activity.id]=function(t,e,n,r){var i,o=et(t.src),a=null===(i=e?.options.services)||void 0===i?void 0:i[o.type],s=t.data?$(t.data,n,r):void 0,c=a?bt(a,t.id,s):mt(t.id);return c.meta=t,c}(e.activity,v.machine,C,s),t}),e?r({},e.children):{}),P=m?t.configuration:e?e.configuration:[],D=kt(P,this),H=new Nt({value:b||e.value,context:C,_event:s,_sessionid:e?e._sessionid:null,historyValue:b?E?U(E,b):void 0:e?e.historyValue:void 0,history:!b||t.source?e:void 0,actions:b?I:[],activities:b?S:e?e.activities:{},events:[],configuration:P,transitions:t.transitions,children:j,done:D,tags:Ct(P),machine:this}),L=i!==C;H.changed=s.name===x||L;var M=H.history;M&&delete M.history;var V=!D&&(this._transient||y.some((function(t){return t._transient})));if(!(m||V&&""!==s.name))return H;var F=H;if(!D)for(V&&(F=this.resolveRaisedTransition(F,{type:p},s));N.length;){var B=N.shift();F=this.resolveRaisedTransition(F,B._event,s)}var W=F.changed||(M?!!F.actions.length||L||typeof M.value!=typeof F.value||!At(F.value,M.value):void 0);return F.changed=W,F.history=M,F},e.prototype.getStateNode=function(t){if(Zt(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var e=this.states[t];if(!e)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return e},e.prototype.getStateNodeById=function(t){var e=Zt(t)?t.slice(1):t;if(e===this.id)return this;var n=this.machine.idMap[e];if(!n)throw new Error("Child state node '#".concat(e,"' does not exist on machine '").concat(this.id,"'"));return n},e.prototype.getStateNodeByPath=function(t){if("string"==typeof t&&Zt(t))try{return this.getStateNodeById(t.slice(1))}catch{}for(var e=k(t,this.delimiter).slice(),n=this;e.length;){var r=e.shift();if(!r.length)break;n=n.getStateNode(r)}return n},e.prototype.resolve=function(t){var e,n=this;if(!t)return this.initialStateValue||Jt;switch(this.type){case"parallel":return N(this.initialStateValue,(function(e,r){return e?n.getStateNode(r).resolve(t[r]||e):Jt}));case"compound":if(q(t)){var r=this.getStateNode(t);return"parallel"===r.type||"compound"===r.type?((e={})[t]=r.initialStateValue,e):t}return Object.keys(t).length?N(t,(function(t,e){return t?n.getStateNode(e).resolve(t):Jt})):this.initialStateValue||{};default:return t||Jt}},e.prototype.getResolvedPath=function(t){if(Zt(t)){var e=this.machine.idMap[t.slice(1)];if(!e)throw new Error("Unable to find state node '".concat(t,"'"));return e.path}return k(t,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var t,e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)e=I(this.states,(function(t){return t.initialStateValue||Jt}),(function(t){return"history"!==t.type}));else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));e=Et(this.states[this.initial])?this.initial:((t={})[this.initial]=this.states[this.initial].initialStateValue,t)}else e={};return this.__cache.initialStateValue=e,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(t,e){this._init();var n=this.getStateNodes(t);return this.resolveTransition({configuration:n,entrySet:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,e??this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var t;if("history"===this.type){var e=this.config;t=q(e.target)&&Zt(e.target)?A(this.machine.getStateNodeById(e.target).path.slice(this.path.length-1)):e.target}return t},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(t,e,n){return void 0===n&&(n=!0),n?"history"===t.type?t.resolveHistory(e):t.initialStateNodes:[t]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var t=this;return Et(this)?[this]:"compound"!==this.type||this.initial?D(P(this.initialStateValue).map((function(e){return t.getFromRelativePath(e)}))):[this]},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var e=a(t),n=e[0],r=e.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var i=this.getStateNode(n);if("history"===i.type)return i.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(r)},e.prototype.historyValue=function(t){if(Object.keys(this.states).length)return{current:t||this.initialStateValue,states:I(this.states,(function(e,n){if(!t)return e.historyValue();var r=q(t)?void 0:t[n];return e.historyValue(r||e.initialStateValue)}),(function(t){return!t.history}))}},e.prototype.resolveHistory=function(t){var e=this;if("history"!==this.type)return[this];var n=this.parent;if(!t){var r=this.target;return r?D(P(r).map((function(t){return n.getFromRelativePath(t)}))):n.initialStateNodes}var i=function(t,e){return function(n){var r,i,a=n;try{for(var s=o(t),c=s.next();!c.done;c=s.next()){var u=c.value;a=a[e][u]}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a}}(n.path,"states")(t).current;return q(i)?[n.getStateNode(i)]:D(P(i).map((function(t){return"deep"===e.history?n.getFromRelativePath(t):[n.states[t[0]]]})))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var t=this,e=D(Object.keys(this.states).map((function(e){return t.states[e].stateIds})));return[this.id].concat(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var t,e,n,r;if(this.__cache.events)return this.__cache.events;var i=this.states,a=new Set(this.ownEvents);if(i)try{for(var s=o(Object.keys(i)),c=s.next();!c.done;c=s.next()){var u=i[c.value];if(u.states)try{for(var l=(n=void 0,o(u.events)),d=l.next();!d.done;d=l.next()){var f=d.value;a.add("".concat(f))}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(a)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter((function(t){return!(!t.target&&!t.actions.length&&t.internal)})).map((function(t){return t.eventType})));return Array.from(t)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(t){var e=this;if(void 0!==t)return t.map((function(t){if(!q(t))return t;var n=t[0]===e.delimiter;if(n&&!e.parent)return e.getStateNodeByPath(t.slice(1));var r=n?e.key+t:t;if(!e.parent)return e.getStateNodeByPath(r);try{return e.parent.getStateNodeByPath(r)}catch(t){throw new Error("Invalid transition definition for state node '".concat(e.id,"':\n").concat(t.message))}}))},e.prototype.formatTransition=function(t){var e=this,n=function(t){if(void 0!==t&&""!==t)return L(t)}(t.target),i="internal"in t?t.internal:!n||n.some((function(t){return q(t)&&t[0]===e.delimiter})),o=this.machine.options.guards,a=this.resolveTarget(n),s=r(r({},t),{actions:st(L(t.actions)),cond:X(t.cond,o),target:a,source:this,internal:i,eventType:t.event,toJSON:function(){return r(r({},s),{target:s.target?s.target.map((function(t){return"#".concat(t.id)})):void 0,source:"#".concat(e.id)})}});return s},e.prototype.formatTransitions=function(){var t,e,n,r=this;if(this.config.on)if(Array.isArray(this.config.on))n=this.config.on;else{var c=this.config.on,u="*",l=c[u],d=void 0===l?[]:l,f=i(c,["*"]);n=D(Object.keys(f).map((function(t){return Q(t,f[t])})).concat(Q("*",d)))}else n=[];var p=this.config.always?Q("",this.config.always):[],h=this.config.onDone?Q(String(dt(this.id)),this.config.onDone):[],v=D(this.invoke.map((function(t){var e=[];return t.onDone&&e.push.apply(e,s([],a(Q(String(ft(t.id)),t.onDone)),!1)),t.onError&&e.push.apply(e,s([],a(Q(String(pt(t.id)),t.onError)),!1)),e}))),y=this.after,g=D(s(s(s(s([],a(h),!1),a(v),!1),a(n),!1),a(p),!1).map((function(t){return L(t).map((function(t){return r.formatTransition(t)}))})));try{for(var m=o(y),b=m.next();!b.done;b=m.next()){var E=b.value;g.push(E)}}catch(e){t={error:e}}finally{try{b&&!b.done&&(e=m.return)&&e.call(m)}finally{if(t)throw t.error}}return g},e}();function Qt(t,e){return new Yt(t,e)}var te,ee=function(t){return{type:h,assignment:t}},ne=lt,re=function(t,e){return lt(t,r(r({},e),{to:n.Parent}))},ie=function(t,e){return lt((function(t,e){return e}),r(r({},e),{to:t}))},oe=new Uint8Array(16);function ae(){if(!te&&!(te=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return te(oe)}const se=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var ce=[],ue=0;ue<256;++ue)ce.push((ue+256).toString(16).substr(1));function le(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(ce[t[e+0]]+ce[t[e+1]]+ce[t[e+2]]+ce[t[e+3]]+"-"+ce[t[e+4]]+ce[t[e+5]]+"-"+ce[t[e+6]]+ce[t[e+7]]+"-"+ce[t[e+8]]+ce[t[e+9]]+"-"+ce[t[e+10]]+ce[t[e+11]]+ce[t[e+12]]+ce[t[e+13]]+ce[t[e+14]]+ce[t[e+15]]).toLowerCase();if(!function(t){return"string"==typeof t&&se.test(t)}(n))throw TypeError("Stringified UUID is invalid");return n}function de(t,e,n){var r=(t=t||{}).random||(t.rng||ae)();return r[6]=15&r[6]|64,r[8]=63&r[8]|128,le(r)}function fe(t){return"[object Object]"===Object.prototype.toString.call(t)}function pe(t){var e,n;return!1!==fe(t)&&(void 0===(e=t.constructor)||!(!1===fe(n=e.prototype)||!1===n.hasOwnProperty("isPrototypeOf")))}var he=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ve(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ye,ge={exports:{}};var me=(ye||(ye=1,function(t){t.exports=function(){var t=Object.prototype.toString;function e(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function n(t){if(!t||o(t)&&0===t.length)return!0;if("string"!=typeof t){for(var n in t)if(e(t,n))return!1;return!0}return!1}function r(e){return t.call(e)}function i(t){return"object"==typeof t&&"[object Object]"===r(t)}var o=Array.isArray||function(e){return"[object Array]"===t.call(e)};function a(t){return"boolean"==typeof t||"[object Boolean]"===r(t)}function s(t){var e=parseInt(t);return e.toString()===t?e:t}function c(t){var r,c,u=function(t){return Object.keys(u).reduce((function(e,n){return"create"===n||"function"==typeof u[n]&&(e[n]=u[n].bind(u,t)),e}),{})};function l(t,e){if(r(t,e))return t[e]}function d(t,e,n,r){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return d(t,e.split(".").map(s),n,r);var i=e[0],o=c(t,i);return 1===e.length?((void 0===o||!r)&&(t[i]=n),o):(void 0===o&&("number"==typeof e[1]?t[i]=[]:t[i]={}),d(t[i],e.slice(1),n,r))}return r=(t=t||{}).includeInheritedProps?function(){return!0}:function(t,n){return"number"==typeof n&&Array.isArray(t)||e(t,n)},c=t.includeInheritedProps?function(t,e){"string"!=typeof e&&"number"!=typeof e&&(e=String(e));var n=l(t,e);if("__proto__"===e||"prototype"===e||"constructor"===e&&"function"==typeof n)throw new Error("For security reasons, object's magic properties cannot be set");return n}:function(t,e){return l(t,e)},u.has=function(n,r){if("number"==typeof r?r=[r]:"string"==typeof r&&(r=r.split(".")),!r||0===r.length)return!!n;for(var i=0;i<r.length;i++){var a=s(r[i]);if(!("number"==typeof a&&o(n)&&a<n.length||(t.includeInheritedProps?a in Object(n):e(n,a))))return!1;n=n[a]}return!0},u.ensureExists=function(t,e,n){return d(t,e,n,!0)},u.set=function(t,e,n,r){return d(t,e,n,r)},u.insert=function(t,e,n,r){var i=u.get(t,e);r=~~r,o(i)||(i=[],u.set(t,e,i)),i.splice(r,0,n)},u.empty=function(t,e){var s,c;if(!n(e)&&null!=t&&(s=u.get(t,e))){if("string"==typeof s)return u.set(t,e,"");if(a(s))return u.set(t,e,!1);if("number"==typeof s)return u.set(t,e,0);if(o(s))s.length=0;else{if(!i(s))return u.set(t,e,null);for(c in s)r(s,c)&&delete s[c]}}},u.push=function(t,e){var n=u.get(t,e);o(n)||(n=[],u.set(t,e,n)),n.push.apply(n,Array.prototype.slice.call(arguments,2))},u.coalesce=function(t,e,n){for(var r,i=0,o=e.length;i<o;i++)if(void 0!==(r=u.get(t,e[i])))return r;return n},u.get=function(t,e,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return n;if("string"==typeof e)return u.get(t,e.split("."),n);var r=s(e[0]),i=c(t,r);return void 0===i?n:1===e.length?i:u.get(t[r],e.slice(1),n)},u.del=function(t,e){if("number"==typeof e&&(e=[e]),null==t||n(e))return t;if("string"==typeof e)return u.del(t,e.split("."));var i=s(e[0]);return c(t,i),r(t,i)?1!==e.length?u.del(t[i],e.slice(1)):(o(t)?t.splice(i,1):delete t[i],t):t},u}var u=c();return u.create=c,u.withInheritedProps=c({includeInheritedProps:!0}),u}()}(ge)),ge.exports);const be=ve(me);var Ee=Object.prototype.hasOwnProperty;function xe(t){if(we(t))return!1;if(!t||_e(t)&&0===t.length)return!0;if(!Se(t)){for(var e in t)if(Ee.call(t,e))return!1;return!0}return!1}function we(t){return"number"==typeof t}function Se(t){return"string"==typeof t}function _e(t){return Array.isArray(t)}function Te(t,e){for(var n in e)Ee.call(e,n)&&(t[n]=e[n]);return t}function Oe(t){var e=parseInt(t);return e.toString()===t?e:t}function Re(t,e,n){return null==t?e?n?[]:{}:t:_e(t)?t.slice():Te({},t)}function ke(t,e){if(t!==e&&pe(t)&&pe(e)){var n={};for(var r in t)Ee.call(t,r)&&(Ee.call(e,r)?n[r]=ke(t[r],e[r]):n[r]=t[r]);for(r in e)Ee.call(e,r)&&(n[r]=ke(t[r],e[r]));return n}return e}function Ce(t,e,n,r){if(we(n)&&(n=[n]),xe(n))return e;if(Se(n))return Ce(t,e,n.split(".").map(Oe),r);var i=n[0];return(!t||t===e)&&(t=Re(e,!0,we(i))),1===n.length?r(t,i):(null!=e&&(e=e[i]),t[i]=Ce(t[i],e,n.slice(1),r),t)}var Ae={set:function(t,e,n,r){return xe(n)?r:Ce(t,e,n,(function(t,e){return t[e]=r,t}))},update:function(t,e,n,r){return xe(n)?r(Re(e)):Ce(t,e,n,(function(t,e){return t[e]=r(t[e]),t}))},push:function(t,e,n){var r=Array.prototype.slice.call(arguments,3);return xe(n)?_e(e)?e.concat(r):r:Ce(t,e,n,(function(t,e){return _e(t[e])?t[e]=t[e].concat(r):t[e]=r,t}))},insert:function(t,e,n,r,i){if(i=~~i,xe(n)){if(!_e(e))return[r];var o=e.slice(0,i);return o.push(r),o.concat(e.slice(i))}return Ce(t,e,n,(function(t,e){var o=t[e];if(!_e(o)){if(null!=o&&typeof o<"u")throw new Error("Expected "+n+"to be an array. Instead got "+typeof n);o=[]}var a=o.slice(0,i);return a.push(r),t[e]=a.concat(o.slice(i)),t}))},del:function(t,e,n){if(!xe(n))return Ce(t,e,n,(function(t,e){return Array.isArray(t)?void 0!==t[e]&&t.splice(e,1):Ee.call(t,e)&&delete t[e],t}))},assign:function(t,e,n,r){return xe(n)?xe(r)?e:Te(Re(e),r):Ce(t,e,n,(function(t,e){r=Object(r);var n=Re(t[e],!0);return Te(n,r),t[e]=n,t}))},merge:function(t,e,n,r){return xe(n)?xe(r)?e:ke(e,r):Ce(t,e,n,(function(t,e){return r=Object(r),t[e]=ke(t[e],r),t}))}},Ne=Ae.set.bind(null,null),Ie=Ae.update.bind(null,null);Ae.push.bind(null,null),Ae.insert.bind(null,null),Ae.del.bind(null,null),Ae.assign.bind(null,null),Ae.merge.bind(null,null);var je,Pe=be.get,De={exports:{}};var He=(je||(je=1,function(t,e){var n="__lodash_hash_undefined__",r=9007199254740991,i="[object Arguments]",o="[object Array]",a="[object Boolean]",s="[object Date]",c="[object Error]",u="[object Function]",l="[object Map]",d="[object Number]",f="[object Object]",p="[object Promise]",h="[object RegExp]",v="[object Set]",y="[object String]",g="[object Symbol]",m="[object WeakMap]",b="[object ArrayBuffer]",E="[object DataView]",x=/^\[object .+?Constructor\]$/,w=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[i]=S[o]=S[b]=S[a]=S[E]=S[s]=S[c]=S[u]=S[l]=S[d]=S[f]=S[h]=S[v]=S[y]=S[m]=!1;var _="object"==typeof he&&he&&he.Object===Object&&he,T="object"==typeof self&&self&&self.Object===Object&&self,O=_||T||Function("return this")(),R=e&&!e.nodeType&&e,k=R&&t&&!t.nodeType&&t,C=k&&k.exports===R,A=C&&_.process,N=function(){try{return A&&A.binding&&A.binding("util")}catch{}}(),I=N&&N.isTypedArray;function j(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function P(t,e){return t.has(e)}function D(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function H(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var L,$=Array.prototype,M=Function.prototype,z=Object.prototype,V=O["__core-js_shared__"],U=M.toString,F=z.hasOwnProperty,B=(L=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"",W=z.toString,q=RegExp("^"+U.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),X=C?O.Buffer:void 0,G=O.Symbol,K=O.Uint8Array,J=z.propertyIsEnumerable,Z=$.splice,Y=G?G.toStringTag:void 0,Q=Object.getOwnPropertySymbols,tt=X?X.isBuffer:void 0,et=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),nt=At(O,"DataView"),rt=At(O,"Map"),it=At(O,"Promise"),ot=At(O,"Set"),at=At(O,"WeakMap"),st=At(Object,"create"),ct=Pt(nt),ut=Pt(rt),lt=Pt(it),dt=Pt(ot),ft=Pt(at),pt=G?G.prototype:void 0,ht=pt?pt.valueOf:void 0;function vt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function yt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function gt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function mt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new gt;++e<n;)this.add(t[e])}function bt(t){var e=this.__data__=new yt(t);this.size=e.size}function Et(t,e){var n=Lt(t),r=!n&&Ht(t),i=!n&&!r&&$t(t),o=!n&&!r&&!i&&Ft(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=s.length;for(var u in t)F.call(t,u)&&(!a||!("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||jt(u,c)))&&s.push(u);return s}function xt(t,e){for(var n=t.length;n--;)if(Dt(t[n][0],e))return n;return-1}function wt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Y&&Y in Object(t)?function(t){var e=F.call(t,Y),n=t[Y];try{t[Y]=void 0;var r=!0}catch{}var i=W.call(t);return r&&(e?t[Y]=n:delete t[Y]),i}(t):function(t){return W.call(t)}(t)}function St(t){return Ut(t)&&wt(t)==i}function _t(t,e,n,r,u){return t===e||(null==t||null==e||!Ut(t)&&!Ut(e)?t!=t&&e!=e:function(t,e,n,r,u,p){var m=Lt(t),x=Lt(e),w=m?o:It(t),S=x?o:It(e),_=(w=w==i?f:w)==f,T=(S=S==i?f:S)==f,O=w==S;if(O&&$t(t)){if(!$t(e))return!1;m=!0,_=!1}if(O&&!_)return p||(p=new bt),m||Ft(t)?Rt(t,e,n,r,u,p):function(t,e,n,r,i,o,u){switch(n){case E:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case b:return!(t.byteLength!=e.byteLength||!o(new K(t),new K(e)));case a:case s:case d:return Dt(+t,+e);case c:return t.name==e.name&&t.message==e.message;case h:case y:return t==e+"";case l:var f=D;case v:var p=1&r;if(f||(f=H),t.size!=e.size&&!p)return!1;var m=u.get(t);if(m)return m==e;r|=2,u.set(t,e);var x=Rt(f(t),f(e),r,i,o,u);return u.delete(t),x;case g:if(ht)return ht.call(t)==ht.call(e)}return!1}(t,e,w,n,r,u,p);if(!(1&n)){var R=_&&F.call(t,"__wrapped__"),k=T&&F.call(e,"__wrapped__");if(R||k){var C=R?t.value():t,A=k?e.value():e;return p||(p=new bt),u(C,A,n,r,p)}}return!!O&&(p||(p=new bt),function(t,e,n,r,i,o){var a=1&n,s=kt(t),c=s.length,u=kt(e),l=u.length;if(c!=l&&!a)return!1;for(var d=c;d--;){var f=s[d];if(!(a?f in e:F.call(e,f)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var h=!0;o.set(t,e),o.set(e,t);for(var v=a;++d<c;){var y=t[f=s[d]],g=e[f];if(r)var m=a?r(g,y,f,e,t,o):r(y,g,f,t,e,o);if(!(void 0===m?y===g||i(y,g,n,r,o):m)){h=!1;break}v||(v="constructor"==f)}if(h&&!v){var b=t.constructor,E=e.constructor;b!=E&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof E&&E instanceof E)&&(h=!1)}return o.delete(t),o.delete(e),h}(t,e,n,r,u,p))}(t,e,n,r,_t,u))}function Tt(t){return!(!Vt(t)||function(t){return!!B&&B in t}(t))&&(Mt(t)?q:x).test(Pt(t))}function Ot(t){if(!function(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||z;return t===n}(t))return et(t);var e=[];for(var n in Object(t))F.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Rt(t,e,n,r,i,o){var a=1&n,s=t.length,c=e.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(t);if(u&&o.get(e))return u==e;var l=-1,d=!0,f=2&n?new mt:void 0;for(o.set(t,e),o.set(e,t);++l<s;){var p=t[l],h=e[l];if(r)var v=a?r(h,p,l,e,t,o):r(p,h,l,t,e,o);if(void 0!==v){if(v)continue;d=!1;break}if(f){if(!j(e,(function(t,e){if(!P(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)}))){d=!1;break}}else if(p!==h&&!i(p,h,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function kt(t){return function(t,e,n){var r=e(t);return Lt(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,Bt,Nt)}function Ct(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function At(t,e){var n=function(t,e){return t?.[e]}(t,e);return Tt(n)?n:void 0}vt.prototype.clear=function(){this.__data__=st?st(null):{},this.size=0},vt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},vt.prototype.get=function(t){var e=this.__data__;if(st){var r=e[t];return r===n?void 0:r}return F.call(e,t)?e[t]:void 0},vt.prototype.has=function(t){var e=this.__data__;return st?void 0!==e[t]:F.call(e,t)},vt.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=st&&void 0===e?n:e,this},yt.prototype.clear=function(){this.__data__=[],this.size=0},yt.prototype.delete=function(t){var e=this.__data__,n=xt(e,t);return!(n<0||(n==e.length-1?e.pop():Z.call(e,n,1),--this.size,0))},yt.prototype.get=function(t){var e=this.__data__,n=xt(e,t);return n<0?void 0:e[n][1]},yt.prototype.has=function(t){return xt(this.__data__,t)>-1},yt.prototype.set=function(t,e){var n=this.__data__,r=xt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},gt.prototype.clear=function(){this.size=0,this.__data__={hash:new vt,map:new(rt||yt),string:new vt}},gt.prototype.delete=function(t){var e=Ct(this,t).delete(t);return this.size-=e?1:0,e},gt.prototype.get=function(t){return Ct(this,t).get(t)},gt.prototype.has=function(t){return Ct(this,t).has(t)},gt.prototype.set=function(t,e){var n=Ct(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},mt.prototype.add=mt.prototype.push=function(t){return this.__data__.set(t,n),this},mt.prototype.has=function(t){return this.__data__.has(t)},bt.prototype.clear=function(){this.__data__=new yt,this.size=0},bt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},bt.prototype.get=function(t){return this.__data__.get(t)},bt.prototype.has=function(t){return this.__data__.has(t)},bt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof yt){var r=n.__data__;if(!rt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new gt(r)}return n.set(t,e),this.size=n.size,this};var Nt=Q?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}(Q(t),(function(e){return J.call(t,e)})))}:function(){return[]},It=wt;function jt(t,e){return!!(e=e??r)&&("number"==typeof t||w.test(t))&&t>-1&&t%1==0&&t<e}function Pt(t){if(null!=t){try{return U.call(t)}catch{}try{return t+""}catch{}}return""}function Dt(t,e){return t===e||t!=t&&e!=e}(nt&&It(new nt(new ArrayBuffer(1)))!=E||rt&&It(new rt)!=l||it&&It(it.resolve())!=p||ot&&It(new ot)!=v||at&&It(new at)!=m)&&(It=function(t){var e=wt(t),n=e==f?t.constructor:void 0,r=n?Pt(n):"";if(r)switch(r){case ct:return E;case ut:return l;case lt:return p;case dt:return v;case ft:return m}return e});var Ht=St(function(){return arguments}())?St:function(t){return Ut(t)&&F.call(t,"callee")&&!J.call(t,"callee")},Lt=Array.isArray,$t=tt||function(){return!1};function Mt(t){if(!Vt(t))return!1;var e=wt(t);return e==u||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function zt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}function Vt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ut(t){return null!=t&&"object"==typeof t}var Ft=I?function(t){return function(e){return t(e)}}(I):function(t){return Ut(t)&&zt(t.length)&&!!S[wt(t)]};function Bt(t){return function(t){return null!=t&&zt(t.length)&&!Mt(t)}(t)?Et(t):Ot(t)}t.exports=function(t,e){return _t(t,e)}}(De,De.exports)),De.exports);const Le=ve(He),$e="SHOW",Me="STOP_EXPERIENCE",ze="START_STEP",Ve="STOP_STEP",Ue="UPDATE_STEP",Fe="SET_STEP_CONTAINER_TARGET",Be="UPDATE_STEP_CONTENT",We="UPDATE_ROOT_STYLE",qe="STEP_STOPPED",Xe="step.begin",Ge="step.prerender",Ke="step.postrender",Je="step.end",Ze="step.error",Ye="RUN_HOOKS",Qe="START_THEME_REMOVAL_LISTENER",tn="STOP_THEME_REMOVAL_LISTENER",en="STEP_CONTAINER_REMOVED",nn="appcues-experience-container",rn="APPCUES-EXPERIENCE-CONTAINER",on="APPCUES-EXPERIENCE-CONTAINER-BUILDER",an="data-appcues-container-id",sn="RUN_TRAITS_DONE",cn="RUN_TRAITS_ERROR",un=(()=>{const t=new Map;return(e,n)=>{const{callbacks:r=[],observerInstance:i=null}=t.get(e)??{};return t.set(e,{observerInstance:i,callbacks:[...r,n]}),(e=>{const{observerInstance:n}=t.get(e);if(n)return;const r=new MutationObserver(((...n)=>{const{callbacks:r}=t.get(e);r.forEach((t=>t(...n)))}));r.observe(e,{childList:!0,subtree:!0});const{callbacks:i}=t.get(e);t.set(e,{callbacks:i,observerInstance:r})})(e),()=>((e,n)=>{const r=t.get(e);if(r){const{callbacks:i,observerInstance:o}=r,a=i.filter((t=>t!==n));if(a.length>0)return void t.set(e,{callbacks:a,observerInstance:o});o.disconnect(),t.delete(e)}})(e,n)}})(),ln="|shadow-root|",dn="|iframe|",fn=(t,e=document.documentElement)=>t.includes(ln)||t.includes(dn)?t.split(ln).flatMap((t=>t.split(dn))).reduce(((t,n)=>null===t?[...e.querySelectorAll(n)]:t.flatMap((t=>t.shadowRoot?[...t.shadowRoot.querySelectorAll(n)]:"IFRAME"===t.tagName?[...t.contentDocument.querySelectorAll(n)]:[]))),null)??[]:e.querySelectorAll(t),pn=t=>`appcues-container-${t}`,hn=({getTarget:t,onInserted:e})=>{let n=[];const r=()=>{n.forEach((t=>t())),n=[]},i=t();if(1===i.length)return e(i[0]),r(),()=>{};const o=n=>{if(!n.some((t=>t.addedNodes.length>0)))return;const i=t();1===i.length&&(e(i[0]),r())};let a;n.push(un(document.body,o));const s=document.createNodeIterator(document.body,NodeFilter.SHOW_ELEMENT,(t=>t.shadowRoot&&t.nodeName!==rn&&t.nodeName!==on?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT));for(;null!==(a=s.nextNode());)n.push(un(a.shadowRoot,o));return()=>r()},vn=({getTarget:t,onRemoved:e})=>{let n,[r]=t();const i=i=>{if(!i.some((t=>t.removedNodes.length>0)))return;const o=t(),a=!!r&&o[0]!==r;[r]=o,(0===o.length||a||!r.isConnected)&&(e(),n())};return n=r&&r.getRootNode().nodeType===Node.DOCUMENT_FRAGMENT_NODE?un(r.getRootNode(),i):un(document.body,i),()=>n()},yn=(t,e=window.document)=>{try{const n=/^((body\s(>?\s?))?)(?<tagName>[\da-z]+):nth-child\((?<index>\d+)\)(?<remainingSelector>.*)/i,r=t.match(n),i=e.body.firstChild?.nodeName===rn||e.body.firstChild?.nodeName===on;if(!r||!i)return[];const{tagName:o,index:a,remainingSelector:s}=r.groups,c=Number.parseInt(a,10)-1,u=(t=>{let e=0;for(let n=0;n<t.length&&t[n].nodeName===rn&&t[n].nodeName===on;n++)e=n;return t.slice(e+1)})([...document.body.children]),l=u[c]?.nodeName===o.toUpperCase()?u[c]:null;return s?l?fn(`* ${s}`,l):[]:[l]}catch(t){return[]}},gn=(t,{step:e,stepContainer:n,checkOutsideContainer:r})=>{const i=pn(e.id);let o=[];if(r){const e=yn(t),n=e.length>0?e:fn(t);n.length>0&&(o=[...o,...n])}if(!n)return o;let a=((t,e=document.documentElement)=>{const n=fn(t,e);return n.length>0?n[0]:null})(`[${an}=${i}]`,n);return a&&(a=fn(t,a)),a=a??[],a.length>0&&(o=[...o,...a]),o},mn=({accountId:t,id:e,theme:n})=>{const r=document.createElement(nn);return n&&r.setAttribute("themeId",n),r.setAttribute("accountId",t),r.setAttribute("id",pn(e)),((t,...e)=>{e.forEach((e=>t.addEventListener(e,(t=>{t.stopPropagation()}))))})(r,"keypress","keydown","keyup"),r},bn=({experience:t})=>{const{theme:e,accountId:n,id:r}=t;if(!n)return;const i=mn({accountId:n,id:r,theme:e});document.body.append(i)},En=({experience:t})=>{const e=pn(t.id);fn(`#${e}`).forEach((t=>document.body.removeChild(t)))},xn=({getRoot:t})=>ht([{cond:"hasCustomContainer",actions:[()=>{(({getRoot:t})=>{const e=t();e.parentElement&&e.parentElement.removeChild(e)})({getRoot:t})}]}]),wn=({experience:t})=>(e,n)=>{n((({type:n})=>{if(n!==Qe)return;const r=pn(t.id);vn({getTarget:()=>fn(`#${r}`),onRemoved:()=>{e("GLOBAL_CONTAINER_REMOVED")}})}))},Sn=ne(Qe,{to:"themeRemovalService"}),_n=ne(tn,{to:"themeRemovalService"});var Tn,On={exports:{}};var Rn=(Tn||(Tn=1,function(t){!function(){function e(t,e,n){return t.call.apply(t.bind,arguments)}function n(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function r(t,i,o){return(r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?e:n).apply(null,arguments)}var i=Date.now||function(){return+new Date};function o(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var a=!!window.FontFace;function s(t,e,n,r){if(e=t.c.createElement(e),n)for(var i in n)n.hasOwnProperty(i)&&("style"==i?e.style.cssText=n[i]:e.setAttribute(i,n[i]));return r&&e.appendChild(t.c.createTextNode(r)),e}function c(t,e,n){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function u(t){t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){e=e||[],n=n||[];for(var r=t.className.split(/\s+/),i=0;i<e.length;i+=1){for(var o=!1,a=0;a<r.length;a+=1)if(e[i]===r[a]){o=!0;break}o||r.push(e[i])}for(e=[],i=0;i<r.length;i+=1){for(o=!1,a=0;a<n.length;a+=1)if(r[i]===n[a]){o=!0;break}o||e.push(r[i])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function d(t,e){for(var n=t.className.split(/\s+/),r=0,i=n.length;r<i;r++)if(n[r]==e)return!0;return!1}function f(t,e,n){function r(){l&&i&&o&&(l(u),l=null)}e=s(t,"link",{rel:"stylesheet",href:e,media:"all"});var i=!1,o=!0,u=null,l=n||null;a?(e.onload=function(){i=!0,r()},e.onerror=function(){i=!0,u=Error("Stylesheet failed to load"),r()}):setTimeout((function(){i=!0,r()}),0),c(t,"head",e)}function p(t,e,n,r){var i=t.c.getElementsByTagName("head")[0];if(i){var o=s(t,"script",{src:e}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&i.removeChild(o))},i.appendChild(o),setTimeout((function(){a||(a=!0,n&&n(Error("Script load timeout")))}),r||5e3),o}return null}function h(){this.a=0,this.c=null}function v(t){return t.a++,function(){t.a--,g(t)}}function y(t,e){t.c=e,g(t)}function g(t){0==t.a&&t.c&&(t.c(),t.c=null)}function m(t){this.a=t||"-"}function b(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function E(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var r=t[n].replace(/['"]/g,"");-1!=r.indexOf(" ")||/^\d/.test(r)?e.push("'"+r+"'"):e.push(r)}return e.join(",")}function x(t){return t.a+t.f}function w(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function S(t){var e=4,n="n",r=null;return t&&((r=t.match(/(normal|oblique|italic)/i))&&r[1]&&(n=r[1].substr(0,1).toLowerCase()),(r=t.match(/([1-9]00|normal|bold)/i))&&r[1]&&(/bold/i.test(r[1])?e=7:/[1-9]00/.test(r[1])&&(e=parseInt(r[1].substr(0,1),10)))),n+e}function _(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new m("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function T(t){if(t.g){var e=d(t.f,t.a.c("wf","active")),n=[],r=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),l(t.f,n,r)}O(t,"inactive")}function O(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,x(n)):t.h[e]())}function R(){this.c={}}function k(t,e){this.c=t,this.f=e,this.a=s(this.c,"span",{"aria-hidden":"true"},this.f)}function C(t){c(t.c,"body",t.a)}function A(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+E(t.c)+";font-style:"+w(t)+";font-weight:"+t.f+"00;"}function N(t,e,n,r,i,o){this.g=t,this.j=e,this.a=r,this.c=n,this.f=i||3e3,this.h=o||void 0}function I(t,e,n,r,i,o,a){this.v=t,this.B=e,this.c=n,this.a=r,this.s=a||"BESbswy",this.f={},this.w=i||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new k(this.c,this.s),this.h=new k(this.c,this.s),this.j=new k(this.c,this.s),this.m=new k(this.c,this.s),t=A(t=new b(this.a.c+",serif",x(this.a))),this.g.a.style.cssText=t,t=A(t=new b(this.a.c+",sans-serif",x(this.a))),this.h.a.style.cssText=t,t=A(t=new b("serif",x(this.a))),this.j.a.style.cssText=t,t=A(t=new b("sans-serif",x(this.a))),this.m.a.style.cssText=t,C(this.g),C(this.h),C(this.j),C(this.m)}m.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},N.prototype.start=function(){var t=this.c.o.document,e=this,n=i(),r=new Promise((function(r,o){!function a(){i()-n>=e.f?o():t.fonts.load(function(t){return w(t)+" "+t.f+"00 300px "+E(t.c)}(e.a),e.h).then((function(t){1<=t.length?r():setTimeout(a,25)}),(function(){o()}))}()})),o=null,a=new Promise((function(t,n){o=setTimeout(n,e.f)}));Promise.race([a,r]).then((function(){o&&(clearTimeout(o),o=null),e.g(e.a)}),(function(){e.j(e.a)}))};var j={D:"serif",C:"sans-serif"},P=null;function D(){if(null===P){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);P=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return P}function H(t,e,n){for(var r in j)if(j.hasOwnProperty(r)&&e===t.f[j[r]]&&n===t.f[j[r]])return!0;return!1}function L(t){var e,n=t.g.a.offsetWidth,o=t.h.a.offsetWidth;(e=n===t.f.serif&&o===t.f["sans-serif"])||(e=D()&&H(t,n,o)),e?i()-t.A>=t.w?D()&&H(t,n,o)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?$(t,t.v):$(t,t.B):function(t){setTimeout(r((function(){L(this)}),t),50)}(t):$(t,t.v)}function $(t,e){setTimeout(r((function(){u(this.g.a),u(this.h.a),u(this.j.a),u(this.m.a),e(this.a)}),t),0)}function M(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}I.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=i(),L(this)};var z=null;function V(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&l(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),O(t,"active")):T(t.a))}function U(t){this.j=t,this.a=new R,this.h=0,this.f=this.g=!0}function F(t,e,n,i,o){var a=0==--t.h;(t.f||t.g)&&setTimeout((function(){var t=o||null,s=i||{};if(0===n.length&&a)T(e.a);else{e.f+=n.length,a&&(e.j=a);var c,u=[];for(c=0;c<n.length;c++){var d=n[c],f=s[d.c],p=e.a,h=d;if(p.g&&l(p.f,[p.a.c("wf",h.c,x(h).toString(),"loading")]),O(p,"fontloading",h),p=null,null===z)if(window.FontFace){h=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var v=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);z=h?42<parseInt(h[1],10):!v}else z=!1;p=z?new N(r(e.g,e),r(e.h,e),e.c,d,e.s,f):new I(r(e.g,e),r(e.h,e),e.c,d,e.s,t,f),u.push(p)}for(c=0;c<u.length;c++)u[c].start()}}),0)}function B(t,e){this.c=t,this.a=e}function W(t,e){this.c=t,this.a=e}function q(t,e){this.c=t||X,this.a=[],this.f=[],this.g=e||""}M.prototype.g=function(t){var e=this.a;e.g&&l(e.f,[e.a.c("wf",t.c,x(t).toString(),"active")],[e.a.c("wf",t.c,x(t).toString(),"loading"),e.a.c("wf",t.c,x(t).toString(),"inactive")]),O(e,"fontactive",t),this.m=!0,V(this)},M.prototype.h=function(t){var e=this.a;if(e.g){var n=d(e.f,e.a.c("wf",t.c,x(t).toString(),"active")),r=[],i=[e.a.c("wf",t.c,x(t).toString(),"loading")];n||r.push(e.a.c("wf",t.c,x(t).toString(),"inactive")),l(e.f,r,i)}O(e,"fontinactive",t),V(this)},U.prototype.load=function(t){this.c=new o(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,n){var r=[],i=n.timeout;!function(t){t.g&&l(t.f,[t.a.c("wf","loading")]),O(t,"loading")}(e),r=function(t,e,n){var r,i=[];for(r in e)if(e.hasOwnProperty(r)){var o=t.c[r];o&&i.push(o(e[r],n))}return i}(t.a,n,t.c);var o=new M(t.c,e,i);for(t.h=r.length,e=0,n=r.length;e<n;e++)r[e].load((function(e,n,r){F(t,o,e,n,r)}))}(this,new _(this.c,t),t)},B.prototype.load=function(t){function e(){if(o["__mti_fntLst"+r]){var n,i=o["__mti_fntLst"+r](),a=[];if(i)for(var s=0;s<i.length;s++){var c=i[s].fontfamily;null!=i[s].fontStyle&&null!=i[s].fontWeight?(n=i[s].fontStyle+i[s].fontWeight,a.push(new b(c,n))):a.push(new b(c))}t(a)}else setTimeout((function(){e()}),50)}var n=this,r=n.a.projectId,i=n.a.version;if(r){var o=n.c.o;p(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+r+".js"+(i?"?v="+i:""),(function(i){i?t([]):(o["__MonotypeConfiguration__"+r]=function(){return n.a},e())})).id="__MonotypeAPIScript__"+r}else t([])},W.prototype.load=function(t){var e,n,r=this.a.urls||[],i=this.a.families||[],o=this.a.testStrings||{},a=new h;for(e=0,n=r.length;e<n;e++)f(this.c,r[e],v(a));var s=[];for(e=0,n=i.length;e<n;e++)if((r=i[e].split(":"))[1])for(var c=r[1].split(","),u=0;u<c.length;u+=1)s.push(new b(r[0],c[u]));else s.push(new b(r[0]));y(a,(function(){t(s,o)}))};var X="https://fonts.googleapis.com/css";function G(t){this.f=t,this.a=[],this.c={}}var K={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},J={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Z={i:"i",italic:"i",n:"n",normal:"n"},Y=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Q(t,e){this.c=t,this.a=e}var tt={Arimo:!0,Cousine:!0,Tinos:!0};function et(t,e){this.c=t,this.a=e}function nt(t,e){this.c=t,this.f=e,this.a=[]}Q.prototype.load=function(t){var e=new h,n=this.c,r=new q(this.a.api,this.a.text),i=this.a.families;!function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r].split(":");3==i.length&&t.f.push(i.pop());var o="";2==i.length&&""!=i[1]&&(o=":"),t.a.push(i.join(o))}}(r,i);var o=new G(i);(function(t){for(var e=t.f.length,n=0;n<e;n++){var r=t.f[n].split(":"),i=r[0].replace(/\+/g," "),o=["n4"];if(2<=r.length){var a;if(a=[],s=r[1])for(var s,c=(s=s.split(",")).length,u=0;u<c;u++){var l;if((l=s[u]).match(/^[\w-]+$/))if(null==(d=Y.exec(l.toLowerCase())))l="";else{if(l=null==(l=d[2])||""==l?"n":Z[l],null==(d=d[1])||""==d)d="4";else var d=J[d]||(isNaN(d)?"4":d.substr(0,1));l=[l,d].join("")}else l="";l&&a.push(l)}0<a.length&&(o=a),3==r.length&&(a=[],0<(r=(r=r[2])?r.split(","):a).length&&(r=K[r[0]])&&(t.c[i]=r))}for(t.c[i]||(r=K[i])&&(t.c[i]=r),r=0;r<o.length;r+=1)t.a.push(new b(i,o[r]))}})(o),f(n,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],r=0;r<e;r++)n.push(t.a[r].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(r),v(e)),y(e,(function(){t(o.a,o.c,tt)}))},et.prototype.load=function(t){var e=this.a.id,n=this.c.o;e?p(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",(function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var r=[],i=0;i<e.length;i+=2)for(var o=e[i],a=e[i+1],s=0;s<a.length;s++)r.push(new b(o,a[s]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch{}t(r)}}),2e3):t([])},nt.prototype.load=function(t){var e=this.f.id,n=this.c.o,r=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var i=0,o=n.fonts.length;i<o;++i){var a=n.fonts[i];r.a.push(new b(a.name,S("font-weight:"+a.weight+";font-style:"+a.style)))}t(r.a)},p(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",(function(e){e&&t([])}))):t([])};var rt=new U(window);rt.a.c.custom=function(t,e){return new W(e,t)},rt.a.c.fontdeck=function(t,e){return new nt(e,t)},rt.a.c.monotype=function(t,e){return new B(e,t)},rt.a.c.typekit=function(t,e){return new et(e,t)},rt.a.c.google=function(t,e){return new Q(e,t)};var it={load:r(rt.load,rt)};t.exports?t.exports=it:(window.WebFont=it,window.WebFontConfig&&rt.load(window.WebFontConfig))}()}(On)),On.exports);const kn=ve(Rn);var Cn,An={exports:{}};var Nn=function(){if(Cn)return An.exports;function t(t,e,n,r){var i=function(t){return null==t||"number"==typeof t||"boolean"==typeof t}(r)?r:n(r),o=e.get(i);return typeof o>"u"&&(o=t.call(this,r),e.set(i,o)),o}function e(t,e,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),o=e.get(i);return typeof o>"u"&&(o=t.apply(this,r),e.set(i,o)),o}function n(t,e,n,r,i){return n.bind(e,t,r,i)}function r(r,i){return n(r,this,1===r.length?t:e,i.cache.create(),i.serializer)}function i(){return JSON.stringify(arguments)}function o(){this.cache=Object.create(null)}Cn=1,o.prototype.has=function(t){return t in this.cache},o.prototype.get=function(t){return this.cache[t]},o.prototype.set=function(t,e){this.cache[t]=e};var a={create:function(){return new o}};return An.exports=function(t,e){var n=e&&e.cache?e.cache:a,o=e&&e.serializer?e.serializer:i;return(e&&e.strategy?e.strategy:r)(t,{cache:n,serializer:o})},An.exports.strategies={variadic:function(t,r){return n(t,this,e,r.cache.create(),r.serializer)},monadic:function(e,r){return n(e,this,t,r.cache.create(),r.serializer)}},An.exports}();const In=ve(Nn),jn="dev"===window.AppcuesBundleSettings?.VERSION?"https://fast.appcues.com/v1":window.AppcuesBundleSettings?.GENERIC_BUNDLE_DOMAIN?`${window.AppcuesBundleSettings.GENERIC_BUNDLE_DOMAIN}/v1`:"https://fast.appcues.com/v1",Pn=In(((t,e)=>fetch(`${jn}/accounts/${e}/styles/${t}`).then((t=>t.json())))),Dn=(t,e,n)=>{if(!t)return;const r=document.createElement("style");r.innerHTML=`${t}`,e&&r.classList.add(`theme-${e}`),n.shadowRoot.prepend(r)},Hn=async t=>{const e=t.getAttribute("themeId"),n=t.getAttribute("accountId"),{globalStyling:r,theme:i,typekitId:o}=await Pn(e,n).catch((()=>{}));((t,e)=>{const n={classes:!1};null!=e&&(n.custom={urls:[e.general.headerFontUrl,e.general.bodyFontUrl]}),t&&(n.typekit={id:t}),Object.keys(n).length>1&&kn.load(n)})(i?.json?.typekitId??o,i?.json),Dn(i?.css,e,t),Dn(r,e,t)},Ln=ee({step:({step:t},e)=>({...t,virtualizedContent:e.virtualizedContent})}),$n=t=>ee({step:(e,n)=>({stepConfig:n.stepConfig,virtualizedContent:t(n.stepConfig)})}),Mn=ee({experience:(t,e)=>e.experience,step:({step:t},e)=>({...t,...e.stepConfig})}),zn=re("EXPERIENCE_STARTED"),Vn=re((({step:t})=>({type:qe,id:t.id}))),Un=(t,{styles:e,getRoot:n})=>{const r=n();r&&Object.entries(e).forEach((([t,e])=>{t.startsWith("--")?r.style.setProperty(t,e):r.style[t]=e}))},Fn=t=>{const{theme:e,id:n}=t.experience;if(!e)return;const r=document.documentElement.querySelector(`#${pn(n)}`),i=r.getAttribute("themeId");r?.setAttribute("themeId",e),(async(t,e)=>{await Hn(t),e&&t.shadowRoot.querySelectorAll(`.theme-${e}`).forEach((t=>t.remove()))})(r,i)},Bn=t=>ee({step:({step:e})=>{if("tooltip"!==e.type)return e;const n=Object.entries(e.actions).filter((([,t])=>t.find((t=>"click"===t.on)))).map((([t])=>t)),r=e.traits.filter((({config:t})=>t.targetId)).map((({config:t})=>t.targetId));return{...e,virtualizedContent:t(e,{interactiveEls:n,focusableEls:r})}}}),Wn=ht([{cond:(t,e)=>e.errorEvent?.type===en,actions:[ut({type:"AUTO_RECOVER_STEP",isAutoRecoverEvent:!0})]}]),qn=ee({actionsRunning:!0}),Xn=ee({actionsRunning:!1}),Gn=()=>{const t=new Map,e=e=>t.get(e);return{getCallback:e,registerCallback:(n,r)=>{if(e(n),"string"!=typeof n||"function"!=typeof r)throw new TypeError("Key name should be string and callback a valid function");t.set(n,r)}}},Kn=({getTrait:t,trait:e,...n})=>{const r=t(e.type);r&&r(n,e.config??{})},{getCallback:Jn,registerCallback:Zn}=Gn();const Yn=({experience:t,step:e,overrideStyle:n,getContainer:r,getRoot:i,callback:o,get:a,traitIndex:s,getAction:c=()=>null})=>{const{findId:u}=a("vNodeHandlers"),l=(({experience:t,callback:e,step:n,traitIndex:r,findId:i,getContainer:o})=>{const a=(t,{forwardToParent:i=!1}={})=>{const a=({type:t,...n})=>e(i?{...n,eventType:t,type:"FORWARD_TO_PARENT"}:{type:t,...n});return{querySelector:t=>gn(t,{step:n,checkOutsideContainer:!1,stepContainer:o()}),start:()=>a({type:ze,id:t.id}),stop:()=>a({type:Ve,id:t.id}),setStepContainerTarget:e=>{a({type:Fe,id:t.id,container:e})},recover:({errorId:e})=>{a({type:"RECOVER_STEP",id:t.id,errorId:e})},dismissExperience:()=>a({type:"EXPERIENCE_DISMISSED"}),snoozeExperience:()=>a({type:"EXPERIENCE_SNOOZED"}),seen:()=>a({type:"STEP_SEEN",id:t.id}),getConfig:()=>t,getTraitConfig:()=>n.traits[r].config,interaction:(e,n)=>a({type:"STEP_INTERACTION",id:t.id,interactionType:e,interactionData:n}),extendedEvent:(e,n)=>a({type:"EXTENDED_EVENT",id:t.id,name:e,...n})}},s=t.steps.map((t=>a(t,{forwardToParent:!!n})));return n?{getRootNodeId:()=>i(n.virtualizedContent),steps:s,step:a(n,{forwardToParent:!1})}:{getRootNodeId:()=>i(n.virtualizedContent),steps:s}})({experience:t,step:e,callback:o,traitIndex:s,findId:u,getContainer:r}),d={querySelector:t=>gn(t,{step:e,checkOutsideContainer:!0,stepContainer:r()}),reportError:t=>{const e=((t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce(((t,e)=>t+((e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_")),""))();return o({type:"ERROR",message:t,errorId:e}),e},onElementInserted:hn,onElementRemoved:vn,...l,stopExperience:()=>o(Me),getExperienceId:()=>t.id,sendEvent:a("sendEvent"),sendCustomEvent:a("sendCustomEvent"),showFlow:a("showFlow"),updateUserProfile:a("updateUserProfile"),getAction:n=>c(`${t.id}.${n}`)??c(`${e.id}.${n}`)??c(n)};return n?{updateStyle:(...t)=>{n(...t),o({type:Ue,id:e.id})},updateRootStyle:(t,e={})=>{o({type:We,styles:t,options:e,getRoot:i})},...d}:d},Qn="formData.",{getCallback:tr,registerCallback:er}=Gn(),nr=(t,e,n)=>{const r={target:e.target,detail:e.detail};return Object.entries(t).reduce(((t,[e,n])=>{const i=((t,e)=>{if(e.startsWith(Qn)){const n=e.replace(Qn,"");return new FormData(t.target).get(n)}return Pe(t,e)})(r,e);return i?Ne(t,n,i):t}),n)};function rr(t){if(ir(t)){for(;t&&ir(t);)t=or(t).parent;return t??null}return t.parentNode}function ir(t){return 11===t.nodeType}function or(t,e){var n,r,i;const o=t;return null!==(n=o.parent)&&void 0!==n||(o.parent=e??null),null!==(r=o.firstChildNode)&&void 0!==r||(o.firstChildNode=t.firstChild),null!==(i=o.lastChildNode)&&void 0!==i||(o.lastChildNode=t.lastChild),o}const ar={createElement:function(t,e){return document.createElement(t,e)},createElementNS:function(t,e,n){return document.createElementNS(t,e,n)},createTextNode:function(t){return document.createTextNode(t)},createDocumentFragment:function(){return or(document.createDocumentFragment())},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){if(ir(t)){let e=t;for(;e&&ir(e);)e=or(e).parent;t=e??t}ir(e)&&(e=or(e,t)),n&&ir(n)&&(n=or(n).firstChildNode),t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){ir(e)&&(e=or(e,t)),t.appendChild(e)},parentNode:rr,nextSibling:function(t){var e;if(ir(t)){const n=or(t),r=rr(n);if(r&&n.lastChildNode){const t=Array.from(r.childNodes),i=t.indexOf(n.lastChildNode);return null!==(e=t[i+1])&&void 0!==e?e:null}return null}return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},getTextContent:function(t){return t.textContent},isElement:function(t){return 1===t.nodeType},isText:function(t){return 3===t.nodeType},isComment:function(t){return 8===t.nodeType},isDocumentFragment:ir};function sr(t,e,n,r,i){return{sel:t,data:e,children:n,text:r,elm:i,key:void 0===e?void 0:e.key}}const cr=Array.isArray;function ur(t){return"string"==typeof t||"number"==typeof t||t instanceof String||t instanceof Number}function lr(t){return void 0===t}function dr(t){return void 0!==t}const fr=sr("",{},[],void 0,void 0);function pr(t,e){var n,r;const i=t.key===e.key,o=(null===(n=t.data)||void 0===n?void 0:n.is)===(null===(r=e.data)||void 0===r?void 0:r.is),a=t.sel===e.sel,s=!(!t.sel&&t.sel===e.sel)||typeof t.text==typeof e.text;return a&&i&&o&&s}function hr(){throw new Error("The document fragment is not supported on this platform.")}function vr(t,e,n){var r;const i={};for(let o=e;o<=n;++o){const e=null===(r=t[o])||void 0===r?void 0:r.key;void 0!==e&&(i[e]=o)}return i}const yr=["create","update","remove","destroy","pre","post"];function gr(t,e,n){const r={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},i=void 0!==e?e:ar;for(const e of yr)for(const n of t){const t=n[e];void 0!==t&&r[e].push(t)}function o(t,e){return function(){if(0==--e){const e=i.parentNode(t);i.removeChild(e,t)}}}function a(t,e){var o,s,c,u;let l,d=t.data;if(void 0!==d){const e=null===(o=d.hook)||void 0===o?void 0:o.init;dr(e)&&(e(t),d=t.data)}const f=t.children,p=t.sel;if("!"===p)lr(t.text)&&(t.text=""),t.elm=i.createComment(t.text);else if(void 0!==p){const n=p.indexOf("#"),o=p.indexOf(".",n),c=n>0?n:p.length,u=o>0?o:p.length,h=-1!==n||-1!==o?p.slice(0,Math.min(c,u)):p,v=t.elm=dr(d)&&dr(l=d.ns)?i.createElementNS(l,h,d):i.createElement(h,d);for(c<u&&v.setAttribute("id",p.slice(c+1,u)),o>0&&v.setAttribute("class",p.slice(u+1).replace(/\./g," ")),l=0;l<r.create.length;++l)r.create[l](fr,t);if(cr(f))for(l=0;l<f.length;++l){const t=f[l];null!=t&&i.appendChild(v,a(t,e))}else ur(t.text)&&i.appendChild(v,i.createTextNode(t.text));const y=t.data.hook;dr(y)&&(null===(s=y.create)||void 0===s||s.call(y,fr,t),y.insert&&e.push(t))}else if(null!==(c=n?.experimental)&&void 0!==c&&c.fragments&&t.children){for(t.elm=(null!==(u=i.createDocumentFragment)&&void 0!==u?u:hr)(),l=0;l<r.create.length;++l)r.create[l](fr,t);for(l=0;l<t.children.length;++l){const n=t.children[l];null!=n&&i.appendChild(t.elm,a(n,e))}}else t.elm=i.createTextNode(t.text);return t.elm}function s(t,e,n,r,o,s){for(;r<=o;++r){const o=n[r];null!=o&&i.insertBefore(t,a(o,s),e)}}function c(t){var e,n;const i=t.data;if(void 0!==i){null===(n=null===(e=i?.hook)||void 0===e?void 0:e.destroy)||void 0===n||n.call(e,t);for(let e=0;e<r.destroy.length;++e)r.destroy[e](t);if(void 0!==t.children)for(let e=0;e<t.children.length;++e){const n=t.children[e];null!=n&&"string"!=typeof n&&c(n)}}}function u(t,e,n,a){for(var s,l;n<=a;++n){let a,d;const f=e[n];if(null!=f)if(dr(f.sel)){c(f),a=r.remove.length+1,d=o(f.elm,a);for(let t=0;t<r.remove.length;++t)r.remove[t](f,d);const t=null===(l=null===(s=f?.data)||void 0===s?void 0:s.hook)||void 0===l?void 0:l.remove;dr(t)?t(f,d):d()}else f.children?(c(f),u(t,f.children,0,f.children.length-1)):i.removeChild(t,f.elm)}}function l(t,e,n){var o,c,d,f,p,h,v,y;const g=null===(o=e.data)||void 0===o?void 0:o.hook;null===(c=g?.prepatch)||void 0===c||c.call(g,t,e);const m=e.elm=t.elm;if(t===e)return;if(void 0!==e.data||dr(e.text)&&e.text!==t.text){null!==(d=e.data)&&void 0!==d||(e.data={}),null!==(f=t.data)&&void 0!==f||(t.data={});for(let n=0;n<r.update.length;++n)r.update[n](t,e);null===(v=null===(h=null===(p=e.data)||void 0===p?void 0:p.hook)||void 0===h?void 0:h.update)||void 0===v||v.call(h,t,e)}const b=t.children,E=e.children;lr(e.text)?dr(b)&&dr(E)?b!==E&&function(t,e,n,r){let o,c,d,f,p=0,h=0,v=e.length-1,y=e[0],g=e[v],m=n.length-1,b=n[0],E=n[m];for(;p<=v&&h<=m;)null==y?y=e[++p]:null==g?g=e[--v]:null==b?b=n[++h]:null==E?E=n[--m]:pr(y,b)?(l(y,b,r),y=e[++p],b=n[++h]):pr(g,E)?(l(g,E,r),g=e[--v],E=n[--m]):pr(y,E)?(l(y,E,r),i.insertBefore(t,y.elm,i.nextSibling(g.elm)),y=e[++p],E=n[--m]):pr(g,b)?(l(g,b,r),i.insertBefore(t,g.elm,y.elm),g=e[--v],b=n[++h]):(void 0===o&&(o=vr(e,p,v)),c=o[b.key],lr(c)?i.insertBefore(t,a(b,r),y.elm):(d=e[c],d.sel!==b.sel?i.insertBefore(t,a(b,r),y.elm):(l(d,b,r),e[c]=void 0,i.insertBefore(t,d.elm,y.elm))),b=n[++h]);h<=m&&(f=null==n[m+1]?null:n[m+1].elm,s(t,f,n,h,m,r)),p<=v&&u(t,e,p,v)}(m,b,E,n):dr(E)?(dr(t.text)&&i.setTextContent(m,""),s(m,null,E,0,E.length-1,n)):dr(b)?u(m,b,0,b.length-1):dr(t.text)&&i.setTextContent(m,""):t.text!==e.text&&(dr(b)&&u(m,b,0,b.length-1),i.setTextContent(m,e.text)),null===(y=g?.postpatch)||void 0===y||y.call(g,t,e)}return function(t,e){let n,o,s;const c=[];for(n=0;n<r.pre.length;++n)r.pre[n]();for(function(t,e){return t.isElement(e)}(i,t)?t=function(t){const e=t.id?"#"+t.id:"",n=t.getAttribute("class"),r=n?"."+n.split(" ").join("."):"";return sr(i.tagName(t).toLowerCase()+e+r,{},[],void 0,t)}(t):function(t,e){return t.isDocumentFragment(e)}(i,t)&&(t=sr(void 0,{},[],void 0,t)),pr(t,e)?l(t,e,c):(o=t.elm,s=i.parentNode(o),a(e,c),null!==s&&(i.insertBefore(s,e.elm,i.nextSibling(o)),u(s,[t],0,0))),n=0;n<c.length;++n)c[n].data.hook.insert(c[n]);for(n=0;n<r.post.length;++n)r.post[n]();return e}}function mr(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(let t=0;t<e.length;++t){const n=e[t];if("string"==typeof n)continue;const r=n.data;void 0!==r&&mr(r,n.children,n.sel)}}function br(t,e,n){let r,i,o,a={};if(void 0!==n?(null!==e&&(a=e),cr(n)?r=n:ur(n)?i=n.toString():n&&n.sel&&(r=[n])):null!=e&&(cr(e)?r=e:ur(e)?i=e.toString():e&&e.sel?r=[e]:a=e),void 0!==r)for(o=0;o<r.length;++o)ur(r[o])&&(r[o]=sr(void 0,void 0,void 0,r[o],void 0));return"s"===t[0]&&"v"===t[1]&&"g"===t[2]&&(3===t.length||"."===t[3]||"#"===t[3])&&mr(a,r,t),sr(t,a,r,i,void 0)}function Er(t){let e,n;if(cr(t)?e=t:ur(e)?n=t:e&&e.sel&&(e=[t]),void 0!==e)for(let t=0;t<e.length;++t)ur(e[t])&&(e[t]=sr(void 0,void 0,void 0,e[t],void 0));return sr(void 0,{},e,n,void 0)}function xr(t,e){var n;const r=null===(n=e.data)||void 0===n?void 0:n.ns;t.data.fn=e.data.fn,t.data.args=e.data.args,e.data=t.data,e.children=t.children,e.text=t.text,e.elm=t.elm,r&&mr(e.data,e.children,e.sel)}function wr(t){const e=t.data;xr(e.fn(...e.args),t)}function Sr(t,e){let n;const r=t.data,i=e.data,o=r.args,a=i.args;if(r.fn===i.fn&&o.length===a.length){for(n=0;n<a.length;++n)if(o[n]!==a[n])return void xr(i.fn(...a),e);xr(t,e)}else xr(i.fn(...a),e)}function _r(t,e){const n=t.data.attachData;e.data.attachData.placeholder=n.placeholder,e.data.attachData.real=n.real,t.elm=t.data.attachData.real}function Tr(t,e){e.elm=e.data.attachData.placeholder}function Or(t){void 0!==t.elm&&t.elm.parentNode.removeChild(t.elm),t.elm=t.data.attachData.real}function Rr(t,e){const n=e.elm,r=e.data.attachData,i=document.createElement("span");e.elm=i,r.target.appendChild(n),r.real=n,r.placeholder=i}function kr(t,e){let n;const r=e.elm;let i=t.data.attrs,o=e.data.attrs;if((i||o)&&i!==o){for(n in i=i||{},o=o||{},o){const t=o[n];i[n]!==t&&(!0===t?r.setAttribute(n,""):!1===t?r.removeAttribute(n):120!==n.charCodeAt(0)?r.setAttribute(n,t):58===n.charCodeAt(3)?r.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,t):58===n.charCodeAt(5)?r.setAttributeNS("http://www.w3.org/1999/xlink",n,t):r.setAttribute(n,t))}for(n in i)n in o||r.removeAttribute(n)}}const Cr={create:kr,update:kr};function Ar(t,e){let n,r;const i=e.elm;let o=t.data.class,a=e.data.class;if((o||a)&&o!==a){for(r in o=o||{},a=a||{},o)o[r]&&!Object.prototype.hasOwnProperty.call(a,r)&&i.classList.remove(r);for(r in a)n=a[r],n!==o[r]&&i.classList[n?"add":"remove"](r)}}const Nr={create:Ar,update:Ar},Ir=/[A-Z]/g;function jr(t,e){const n=e.elm;let r,i=t.data.dataset,o=e.data.dataset;if(!i&&!o||i===o)return;i=i||{},o=o||{};const a=n.dataset;for(r in i)o[r]||(a?r in a&&delete a[r]:n.removeAttribute("data-"+r.replace(Ir,"-$&").toLowerCase()));for(r in o)i[r]!==o[r]&&(a?a[r]=o[r]:n.setAttribute("data-"+r.replace(Ir,"-$&").toLowerCase(),o[r]))}const Pr={create:jr,update:jr};function Dr(t,e,n){if("function"==typeof t)t.call(e,n,e);else if("object"==typeof t)for(let r=0;r<t.length;r++)Dr(t[r],e,n)}function Hr(t,e){const n=t.type,r=e.data.on;r&&r[n]&&Dr(r[n],e,t)}function Lr(t,e){const n=t.data.on,r=t.listener,i=t.elm,o=e&&e.data.on,a=e&&e.elm;let s;if(n!==o){if(n&&r)if(o)for(s in n)o[s]||i.removeEventListener(s,r,!1);else for(s in n)i.removeEventListener(s,r,!1);if(o){const r=e.listener=t.listener||function t(e){Hr(e,t.vnode)};if(r.vnode=e,n)for(s in o)n[s]||a.addEventListener(s,r,!1);else for(s in o)a.addEventListener(s,r,!1)}}}const $r={create:Lr,update:Lr,destroy:Lr};function Mr(t,e){let n,r,i;const o=e.elm;let a=t.data.props,s=e.data.props;if((a||s)&&a!==s)for(n in a=a||{},s=s||{},s)r=s[n],i=a[n],i!==r&&("value"!==n||o[n]!==r)&&(o[n]=r)}const zr={create:Mr,update:Mr},Vr=typeof window<"u"&&window.requestAnimationFrame.bind(window)||setTimeout;let Ur=!1;function Fr(t,e,n){!function(t){Vr((function(){Vr(t)}))}((function(){t[e]=n}))}function Br(t,e){let n,r;const i=e.elm;let o=t.data.style,a=e.data.style;if(!o&&!a||o===a)return;o=o||{},a=a||{};const s="delayed"in o;for(r in o)a[r]||("-"===r[0]&&"-"===r[1]?i.style.removeProperty(r):i.style[r]="");for(r in a)if(n=a[r],"delayed"===r&&a.delayed)for(const t in a.delayed)n=a.delayed[t],(!s||n!==o.delayed[t])&&Fr(i.style,t,n);else"remove"!==r&&n!==o[r]&&("-"===r[0]&&"-"===r[1]?i.style.setProperty(r,n):i.style[r]=n)}const Wr={pre:function(){Ur=!1},create:Br,update:Br,destroy:function(t){let e,n;const r=t.elm,i=t.data.style;if(i&&(e=i.destroy))for(n in e)r.style[n]=e[n]},remove:function(t,e){const n=t.data.style;if(!n||!n.remove)return void e();let r;Ur||(t.elm.offsetLeft,Ur=!0);const i=t.elm;let o=0;const a=n.remove;let s=0;const c=[];for(r in a)c.push(r),i.style[r]=a[r];const u=getComputedStyle(i)["transition-property"].split(", ");for(;o<u.length;++o)-1!==c.indexOf(u[o])&&s++;i.addEventListener("transitionend",(function(t){t.target===i&&--s,0===s&&e()}))}};function qr(t,e){for(const n of t)null!=n&&!1!==n&&""!==n&&(Array.isArray(n)?qr(n,e):"string"==typeof n||"number"==typeof n||"boolean"==typeof n?e.push(sr(void 0,void 0,void 0,String(n),void 0)):e.push(n));return e}function Xr(t,e,...n){const r=qr(n,[]);return"function"==typeof t?t(e,r):1===r.length&&!r[0].sel&&r[0].text?br(t,e,r[0].text):br(t,e,r)}Xr||(Xr={});const Gr=Object.freeze(Object.defineProperty({__proto__:null,Fragment:function(t,...e){const n=qr(e,[]);return 1===n.length&&!n[0].sel&&n[0].text?sr(void 0,void 0,void 0,n[0].text,void 0):sr(void 0,t??{},n,void 0,void 0)},array:cr,attachTo:function(t,e){void 0===e.data&&(e.data={}),void 0===e.data.hook&&(e.data.hook={});const n=e.data,r=e.data.hook;return n.attachData={target:t,placeholder:void 0,real:void 0},r.create=Rr,r.prepatch=_r,r.postpatch=Tr,r.destroy=Or,e},attributesModule:Cr,classModule:Nr,datasetModule:Pr,eventListenersModule:$r,fragment:Er,h:br,htmlDomApi:ar,init:gr,get jsx(){return Xr},primitive:ur,propsModule:zr,styleModule:Wr,thunk:function(t,e,n,r){return void 0===r&&(r=n,n=e,e=void 0),br(t,{key:e,hook:{init:wr,prepatch:Sr},fn:n,args:r})},toVNode:function t(e,n){const r=void 0!==n?n:ar;let i;if(r.isElement(e)){const i=e.id?"#"+e.id:"",o=e.getAttribute("class"),a=o?"."+o.split(" ").join("."):"",s=r.tagName(e).toLowerCase()+i+a,c={},u={},l={},d=[];let f,p,h;const v=e.attributes,y=e.childNodes;for(p=0,h=v.length;p<h;p++)f=v[p].nodeName,"d"===f[0]&&"a"===f[1]&&"t"===f[2]&&"a"===f[3]&&"-"===f[4]?u[f.slice(5)]=v[p].nodeValue||"":"id"!==f&&"class"!==f&&(c[f]=v[p].nodeValue);for(p=0,h=y.length;p<h;p++)d.push(t(y[p],n));return Object.keys(c).length>0&&(l.attrs=c),Object.keys(u).length>0&&(l.dataset=u),"s"===s[0]&&"v"===s[1]&&"g"===s[2]&&(3===s.length||"."===s[3]||"#"===s[3])&&mr(l,d,s),sr(s,l,d,void 0,e)}return r.isText(e)?(i=r.getTextContent(e),sr(void 0,void 0,void 0,i,e)):r.isComment(e)?(i=r.getTextContent(e),sr("!",{},[],i,e)):sr("",{},[],void 0,e)},vnode:sr},Symbol.toStringTag,{value:"Module"})),Kr=t=>t.reduce(((t,{callback:e,context:n})=>t.then((()=>e(n)))),Promise.resolve()),Jr=t=>t.split("_").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" "),Zr=({experience:t,experienceInstanceId:e},n)=>({experienceId:t.id,experienceName:t.name,experienceType:t.type,isCoreEvent:!0,localeName:t.context?.localeName||"default",localeId:t.context?.localeId||"default",timestamp:Date.now(),version:t.version,name:Jr(n),experienceInstanceId:e}),Yr=({step:t})=>({stepId:t.id,stepName:t.name,stepType:t.type}),Qr=(t,e)=>!t.blockedEvents[e.type],ti=t=>({experienceActions:{experienceStarted:e=>{const n="experience_started",r=Zr(e,n);t("sendEvent")(n,r)},experienceError:(e,{message:n})=>{const r="experience_error",i=Zr(e,r);t("sendEvent")(r,{...i,message:n})},experienceCompleted:e=>{const n="experience_completed",r=Zr(e,n);t("sendEvent")(n,r)}},stepActions:{experienceDismissed:e=>{const n="experience_dismissed",r=Zr(e,n),i=Yr(e);t("sendEvent")(n,{...r,...i})},experienceSnoozed:e=>{const n="experience_snoozed",r=Zr(e,n),i=Yr(e);t("sendEvent")(n,{...r,...i})},stepSeen:e=>{const n="step_seen",r=Zr(e,n),i=Yr(e);t("sendEvent")(n,{...r,...i})},stepInteraction:(e,{interactionType:n,interactionData:r})=>{const i="step_interaction",o=Zr(e,i),a=Yr(e);t("sendEvent")(i,{...o,...a,interactionType:n,interactionData:r})},stepError:(e,{message:n,errorId:r})=>{const i="step_error",o=Zr(e,i),a=Yr(e);t("sendEvent")(i,{...o,...a,message:n,errorId:r})},stepRecovered:(e,{errorId:n})=>{const r="step_recovered",i=Zr(e,r),o=Yr(e);t("sendEvent")(r,{...i,...o,errorId:n})},stepExtendedEvent:(e,n)=>{const r=Zr(e,n.name),i=Yr(e),o=t("sendEvent"),{name:a,...s}=n;o(a,{...r,...i,...s})},stepCompleted:e=>{const n="step_completed",r=Zr(e,n),i=Yr(e);t("sendEvent")(n,{...r,...i})}},helpers:{blockEvent:ee(((t,{type:e,name:n=""})=>{const r="EXTENDED_EVENT"===e?n:e;return{blockedEvents:{...t.blockedEvents,[r]:!0}}})),isEventEnabled:Qr}}),ei=Qt({initial:"waitingForAsyncEvents",context:{runHooksDone:!1},states:{waitingForAsyncEvents:{on:{UPDATE_STEP:"update_step",ERROR:"error",RUN_HOOKS_DONE:{target:"",actions:ee({runHooksDone:!0})}}},update_step:{always:[{target:"done",cond:t=>t.runHooksDone,actions:[re("RERENDER")]}],on:{UPDATE_STEP:"",ERROR:"error",RUN_HOOKS_DONE:{target:"done",actions:[ee({runHooksDone:!0}),re("RERENDER")]}}},error:{always:[{target:"done",cond:t=>t.runHooksDone,actions:[re("FORCE_ERROR")]}],on:{UPDATE_STEP:"",ERROR:"",RUN_HOOKS_DONE:{target:"done",actions:[ee({runHooksDone:!0}),re("FORCE_ERROR")]}}},done:{type:"final"}}}),ni=Qt({initial:"waitingForAsyncEvents",context:{runHooksDone:!1},states:{waitingForAsyncEvents:{on:{RECOVER_STEP:"recover_step",RUN_HOOKS_DONE:{target:"",actions:ee({runHooksDone:!0})}}},recover_step:{always:[{target:"done",cond:t=>t.runHooksDone,actions:[re("FORCE_RECOVER")]}],on:{RUN_HOOKS_DONE:{target:"done",actions:[ee({runHooksDone:!0}),re("FORCE_RECOVER")]}}},done:{type:"final"}}}),ri={initial:"waiting_to_render",on:{SET_STEP_CONTAINER_TARGET:{actions:"setContainer",target:""},UPDATE_ROOT_STYLE:{actions:"updateRootStyle",target:"",cond:"hasCustomContainer"},UPDATE_STEP_CONTENT:{actions:"setContent",target:""},RUN_HOOKS_ERROR:"destroyed",BIND_ACTIONS_ERROR:"destroyed",STOP_STEP:[{cond:"hasPendingActions",target:"waitingPendingActions",internal:!0},{target:"running_end_hooks"}],PARENT_RECOVER_STEP:{actions:["stepRecovered"],target:"rendering",internal:!0},EXPERIENCE_DISMISSED:{target:"",actions:["experienceDismissed"]},EXPERIENCE_SNOOZED:{target:"",actions:["experienceSnoozed"]},STEP_SEEN:{target:"",actions:["stepSeen","blockEvent"],cond:"isEventEnabled"},STEP_INTERACTION:{target:"",actions:["stepInteraction"]},EXTENDED_EVENT:{actions:["stepExtendedEvent","blockEvent"],cond:"isEventEnabled"},RELOAD:[{target:"reload",actions:["updateTheme","updateStepContext"],cond:"didThemeChange"},{target:"reload",actions:["setVirtualizedContent","updateStepContext"],cond:"shouldStepReload"},{target:"rendering",internal:!0,actions:["setVirtualizedContent","updateStepContext"],cond:"didContentChanged"}],[Me]:{actions:[re(Me)]},FORWARD_TO_PARENT:[{actions:[re(((t,{eventType:e,...n})=>({...n,type:e})))],internal:!0}],ACTIONS_STARTED:{target:"",actions:"setActionsRunning",internal:!0},ACTIONS_FINISHED:{target:"",actions:"setActionsFinished",internal:!0}},invoke:[{id:"hooksService",src:"hooksService"},{id:"actionsService",src:"actionsService"},{id:"themeRemovalService",src:"themeRemovalService"}],states:{waiting_to_render:{on:{START_STEP:"running_traits"}},reload:{entry:["removeCustomContainer","unmount","resetRender","clearOverrides","runStepEndHooks"],exit:["removeStepHooks"],on:{RUN_HOOKS_DONE:{target:"running_traits"}}},running_traits:{invoke:{src:"runStepTraits"},on:{RUN_TRAITS_DONE:{target:"begin",actions:ie("actionsService")},RUN_TRAITS_ERROR:"destroyed"}},begin:{entry:["runStepBeginHooks"],on:{ERROR:{target:"error",internal:!0,actions:"stepError"},RUN_HOOKS_DONE:{target:"rendering",actions:"ensuresElementsAreAccessible",cond:"isHooksDoneEventBeginType"}}},rendering:{initial:"pre-render",on:{STEP_CONTAINER_REMOVED:{target:"error",internal:!1}},states:{"pre-render":{entry:["runStepPreRenderHooks"],on:{RUN_HOOKS_DONE:[{target:"render",actions:["applyOverrides"],cond:"isHooksDoneEventPreRenderType"}]}},render:{invoke:{src:"render",onDone:[{target:"post-render",cond:"hasCustomContainer",actions:"startThemeRemovalListener"},{target:"post-render"}]}},"post-render":{invoke:{id:"postRenderAsyncEventsHandler",src:ei},entry:["runStepPostRenderHooks"],on:{FORCE_ERROR:"#error",RERENDER:"pre-render",UPDATE_STEP:{target:"",actions:[ie("postRenderAsyncEventsHandler")]},ERROR:{target:"",actions:[ie("postRenderAsyncEventsHandler"),"stepError"]},RUN_HOOKS_DONE:{target:"",cond:"isHooksDoneEventPostRenderType",actions:["notifyExperienceStarted",ie("postRenderAsyncEventsHandler")]}}}}},running_end_hooks:{entry:["runStepEndHooks"],on:{RUN_HOOKS_DONE:{cond:"isHooksDoneEventEndType",target:"end",actions:["removeCustomContainer","unmount"]}}},end:{type:"final",entry:["stepCompleted","notifyStepStopped","removeStepHooks"]},error:{id:"error",invoke:[{id:"errorAsyncEventsHandler",src:ni}],entry:["unmount","runStepErrorHooks","stopThemeRemovalListener"],on:{RUN_HOOKS_DONE:{target:"",cond:"isHooksDoneEventErrorType",actions:[ie("errorAsyncEventsHandler"),"autoRecover"]},RECOVER_STEP:{target:"",actions:[ie("errorAsyncEventsHandler")]},FORCE_RECOVER:{target:"begin",actions:["resetRender","stepRecovered"]},AUTO_RECOVER_STEP:{target:"begin",actions:"resetRender",cond:"isAutoRecoverEvent"}}},destroyed:{entry:["stepError","unmount"]},waitingPendingActions:{on:{ACTIONS_FINISHED:{target:"running_end_hooks",actions:"setActionsFinished"}}}}},ii=(t,{createStepHooks:e,createHooksService:n,experience:r,get:i,experienceInstanceId:o})=>{const{virtualizeContent:a,createVnodeTree:s,wrapContent:c,applyOverridesToVnode:u}=i("vNodeHandlers"),{makeElementsAccessible:l}=i("accessibilityHandlers"),{applyOverrides:d,createOverrideCallback:f,clearOverrides:p}=(({applyOverridesToVnode:t})=>{let e={};const n=t=>e[t],r=ee((({step:e})=>({step:{...e,virtualizedContent:t(e.virtualizedContent,n)}})));return{createOverrideCallback:t=>(n,r)=>{e[n]||(e[n]={}),e[n][t]||(e[n][t]={}),e[n][t]={...e[n][t],...r}},getOverrides:n,applyOverrides:r,clearOverrides:()=>{e={}}}})({applyOverridesToVnode:u}),h=f("style"),{onRender:v,onRenderReset:y}=i("createRenderListener")(),{render:g,unmount:m,setContainer:b,resetRender:E,getContainer:x,hasCustomContainer:w,getRoot:S}=(({experience:t,onRender:e,onRenderReset:n,wrapContent:r})=>{let i=null,o=null;const a=()=>{const e=pn(t.id);return document.documentElement.querySelector(`#${e}`)},s=()=>o?o.shadowRoot:null,c=()=>i?i.shadowRoot:null,u=((...t)=>e=>t.reduce(((t,e)=>e(t)),e))((t=>(null!==c()||null!==s()||(i=a()),t)),r,(({step:{virtualizedContent:t}})=>{e(s()??c(),t)}));return{render:async t=>new Promise((e=>{e(u(t))})),unmount:()=>e(null,br("!")),setContainer:(t,{container:e})=>{const{theme:n,accountId:r}=t.experience,{id:i}=t.step;o&&o.remove(),o=mn({accountId:r,id:i,theme:n}),e.parentNode.replaceChild(o,e)},resetRender:()=>{i=null,o&&o.remove(),o=null,n()},getContainer:()=>s()??c()??a().shadowRoot,getRoot:()=>o??a(),hasCustomContainer:(t,e)=>e.type===We&&e.options?.forceUpdate||!!s()}})({experience:r,onRender:v,onRenderReset:y,wrapContent:c}),{addHook:_,runStepBeginHooks:T,runStepPreRenderHooks:O,runStepPostRenderHooks:R,runStepEndHooks:k,runStepErrorHooks:C,removeStepHooks:A}=e({step:t,overrideStyle:h}),N=(({addHook:t})=>e=>n=>{const{step:r}=e;try{r.traits.forEach(((e,n)=>Kn({getTrait:Jn,addHook:(e,r)=>{t(e,{callback:r,traitIndex:n})},registerAction:(t,n)=>{er(`${r.id}.${e.type}.${t}`,n)},trait:e}))),n(sn)}catch{n(cn)}})({addHook:_}),I=(({overrideStyle:t,getContainer:e},n)=>({experience:r,step:i})=>(o,a)=>{a((({type:a})=>{if(a===sn)try{const{findId:a,traverseTree:s,injectHandlers:c}=n("vNodeHandlers"),u=JSON.parse(JSON.stringify(i.virtualizedContent));s(u,(s=>{const u=a(s);if(!i.actions[u])return;const l={},d=(a,s)=>{o({type:"ACTIONS_STARTED"});const c=Yn({experience:r,step:i,overrideStyle:t,getContainer:e,callback:o,get:n,getAction:tr});try{l[a].forEach((([t,e,n])=>{t(n&&s?{...e,...nr(n,s,e)}:e,c)}))}catch{c.reportError("something bad happened while running an action.")}finally{o({type:"ACTIONS_FINISHED"})}},f=i.actions[u].reduce(((t,{on:e,type:n,config:o,allowedKeys:a,mapEventToConfig:s})=>{const c=tr(`${r.id}.${n}`)??tr(`${i.id}.${n}`)??tr(n);return l[e]||(l[e]=[]),c&&l[e].push([c,o,s]),e.startsWith("hooks/")?t.hook[e.replace("hooks/","")]=()=>d(e):t.on[e]=t=>{a&&!a.includes(t.code)||(t.preventDefault(),t.stopPropagation(),d(e,t))},t}),{on:{},hook:{}});s=c(s,f)})),o({type:Be,virtualizedContent:u})}catch{o("BIND_ACTIONS_ERROR")}}))})({overrideStyle:h,getContainer:x},i),j=n({overrideStyle:h,getContainer:x,getRoot:S},i),P=(({getRoot:t})=>()=>(e,n)=>{let r;n((({type:n})=>{n===tn&&r?r():n===Qe&&(r&&r(),r=vn({getTarget:()=>[t()],onRemoved:()=>{e(en)}}))}))})({getRoot:S}),D=ti(i),H=t=>"text/html"===t.contentType?a((t=>t.replaceAll("//twemoji.maxcdn.com/2/svg/","//cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/"))((({container:t,nodes:e},n=0)=>t.replace(/<% node %>/,e[n]))(t.content))):s(t.content);return Qt({...ri,context:{id:`step-machine-${t.id}`,step:{...t,activeNodeIndex:0,virtualizedContent:H(t)},experience:r,blockedEvents:{},actionsRunning:!1,experienceInstanceId:o}},{actions:{setContent:Ln,updateRootStyle:Un,unmount:m,setContainer:b,updateTheme:Fn,resetRender:E,runStepBeginHooks:T,runStepPreRenderHooks:O,runStepPostRenderHooks:R,runStepEndHooks:k,runStepErrorHooks:C,updateStepContext:Mn,removeStepHooks:()=>A(),clearOverrides:()=>p(),setVirtualizedContent:$n(H),applyOverrides:d,startThemeRemovalListener:Sn,stopThemeRemovalListener:_n,removeCustomContainer:xn({getRoot:S}),ensuresElementsAreAccessible:Bn(l),notifyExperienceStarted:zn,notifyStepStopped:Vn,...D.stepActions,blockEvent:D.helpers.blockEvent,autoRecover:Wn,setActionsRunning:qn,setActionsFinished:Xn},services:{runStepTraits:N,render:g,hooksService:j,actionsService:I,themeRemovalService:P},guards:{hasCustomContainer:w,isAutoRecoverEvent:(t,e)=>e.isAutoRecoverEvent,isEventEnabled:D.helpers.isEventEnabled,didContentChanged:(t,e)=>!Le(t.step.content,e.stepConfig.content),shouldStepReload:(t,e)=>!Le(t.step.traits,e.stepConfig.traits)||!Le(t.step.actions,e.stepConfig.actions)||!Le(t.experience.traits,e.experience.traits),didThemeChange:(t,e)=>t.experience.theme!==e.experience.theme,isHooksDoneEventPostRenderType:(t,e)=>e.hookType===Ke,isHooksDoneEventPreRenderType:(t,e)=>e.hookType===Ge,isHooksDoneEventBeginType:(t,e)=>e.hookType===Xe,isHooksDoneEventErrorType:(t,e)=>e.hookType===Ze,isHooksDoneEventEndType:(t,e)=>e.hookType===Je,hasPendingActions:t=>t.actionsRunning}})},oi=t=>(e,{id:n,...r})=>{e.stepMachines[n]?.send({...r,type:t})},ai=oi(ze),si=oi(Ve),ci=oi(Ue),ui=oi(Fe),li=oi("PARENT_RECOVER_STEP"),di=oi(Be),fi=t=>{Object.values(t.stepMachines).forEach((t=>{t.send({type:Ve})}))},pi=t=>{Object.entries(t.stepMachines).forEach((([e,n])=>{const r=t.experience.steps.find((t=>t.id===e));n.send({type:"RELOAD",stepConfig:r,experience:t.experience})}))},hi=t=>{Object.values(t.stepMachines).forEach((t=>{t.send({type:en})}))},vi=ee({experience:(t,e)=>e.experience}),yi=ee({experienceInstanceId:()=>de()}),gi=ee({stepMachines:(t,e)=>Object.entries(t.stepMachines).reduce(((t,[n,r])=>(n!==e.id&&(t[n]=r),t)),{})}),mi=ee({experience:({experience:t},e)=>{const n=t.steps.findIndex((t=>t.id===e.id));return-1===n?t:Ie(t,`steps.${n}.traits`,(t=>t.filter((({once:t=!1})=>!t))))}}),bi=(t,e)=>(n,{callback:r,traitIndex:i})=>{const o=t();o.get(n)||o.set(n,[]);const a=o.get(n);e(n,[...a,{callback:r,traitIndex:i}])},Ei=(t,e)=>ne({type:Ye,hookType:t,...e},{to:"hooksService"}),xi=Ei("experience.begin"),wi=Ei("experience.end"),Si=Ei(Xe),_i=Ei(Ge),Ti=Ei(Ke),Oi=Ei(Je),Ri=function(e){return{type:t.Pure,get:e}}(((t,e)=>Ei(Ze,{errorEvent:e}))),ki={id:"experience",initial:"idle",invoke:[{src:"hooksService",id:"hooksService"},{id:"themeRemovalService",src:"globalThemeRemovalService"}],on:{RUN_HOOKS_ERROR:"destroyed",EXPERIENCE_STARTED:{target:"",actions:["experienceStarted","blockEvent"],cond:"isEventEnabled"},SHOW:"running-traits"},states:{idle:{on:{SHOW:[{target:"running-traits",actions:["updateExperienceInstanceId"]},{target:"destroyed"}]}},"running-traits":{invoke:{src:"runGlobalExperienceTraits"},on:{RUN_TRAITS_ERROR:"destroyed",RUN_TRAITS_DONE:"rendering-steps"}},"rendering-steps":{on:{STOP_EXPERIENCE:{target:"end",actions:["stopSteps"]},START_STEP:[{target:"",cond:"doesStepInstanceExist",actions:"startStep"},{target:"",actions:["startStepMachine","startStep"]}],STOP_STEP:{target:"",actions:"stopStep"},UPDATE_STEP:{target:"",actions:"updateStep"},SET_STEP_CONTAINER_TARGET:{target:"",actions:"setStepContainerTarget"},RECOVER_STEP:{target:"",actions:"recoverStep"},GLOBAL_CONTAINER_REMOVED:{target:"",actions:["createGlobalThemeComponent","startThemeRemovalListener","notifyStepsContainerRemoved"]},UPDATE_STEP_CONTENT:{target:"",actions:"updateStepContent"},SHOW:{target:"",actions:["updateExperienceContext","reloadSteps"]},STEP_STOPPED:[{target:"end-final",cond:"areAllStepsStopped",actions:["experienceCompleted","removeGlobalThemeComponent","runExperienceEndHooks"]},{target:"",actions:["cleanStepMachines","cleanRunOnceTraits"]}]},entry:["createGlobalThemeComponent","startStepMachines","runExperienceBeginHooks","startThemeRemovalListener"]},end:{entry:["experienceCompleted","removeGlobalThemeComponent","runExperienceEndHooks"],on:{[qe]:{target:"end-final",cond:"areAllStepsStopped"}}},"end-final":{final:!0},destroyed:{entry:"experienceError",type:"final"}}},Ci=(t,e)=>{const{addHook:n,createStepHooks:r,createHooksService:i,runExperienceBeginHooks:o,runExperienceEndHooks:a}=(()=>{const t=new Map,e=new Map;return{addHook:bi((()=>t),((e,n)=>t.set(e,n))),createStepHooks:({step:t})=>(e.get(t.id)||e.set(t.id,new Map),{addHook:bi((()=>e.get(t.id)),((n,r)=>e.get(t.id).set(n,r))),removeStepHooks:()=>e.set(t.id,new Map),runStepBeginHooks:Si,runStepPreRenderHooks:_i,runStepPostRenderHooks:Ti,runStepEndHooks:Oi,runStepErrorHooks:Ri}),createHooksService:(n={},r)=>i=>(o,a)=>{a((async({type:a,hookType:s,...c})=>{const{experience:u,step:l}=i;if(a!==Ye)return;let d={experience:u,step:l,callback:o,get:r,getContainer:n.getContainer};const f=({callback:t,traitIndex:e})=>({callback:t,context:Yn({...d,traitIndex:e,getAction:tr})});s===Xe&&(d={...d,...n});const p=(t.get(s)??[]).map(f);try{if(await Kr(p),l){const t=(e.get(l.id)?.get(s)??[]).map(f);await Kr(t)}o({type:"RUN_HOOKS_DONE",hookType:s,...c})}catch{o("RUN_HOOKS_ERROR")}}))},runExperienceBeginHooks:xi,runExperienceEndHooks:wi}})(),s=i({},e),c=(({createStepHooks:t,createHooksService:e,get:n})=>ee({stepMachines:({experience:r,experienceInstanceId:i})=>{const o={experience:r,experienceInstanceId:i,createStepHooks:t,createHooksService:e,get:n};return r.steps.reduce(((t,e)=>(t[`${e.id}`]=qt(ii(e,o),`step-machine - ${e.id}`),t)),{})}}))({createStepHooks:r,createHooksService:i,get:e}),u=(({createStepHooks:t,createHooksService:e,get:n})=>ee({stepMachines:({experience:r,stepMachines:i},o)=>{const a={experience:r,createStepHooks:t,createHooksService:e,get:n},s=r.steps.find((t=>t.id===o.id));return s?{...i,[`${o.id}`]:qt(ii(s,a),`step-machine - ${o.id}`)}:i}}))({createStepHooks:r,createHooksService:i,get:e}),l=(({addHook:t})=>({experience:e})=>n=>{try{e.traits.forEach(((n,r)=>Kn({getTrait:Jn,trait:n,addHook:(e,n)=>{t(e,{callback:n,traitIndex:r})},registerAction:(t,r)=>er(`${e.id}.${n.type}.${t}`,r)}))),n(sn)}catch{n(cn)}})({addHook:n}),d=ti(e);return Qt({...ki,context:{experience:t,blockedEvents:{},experienceInstanceId:null}},{actions:{startStep:ai,stopStep:si,updateStep:ci,setStepContainerTarget:ui,recoverStep:li,startStepMachines:c,stopSteps:fi,notifyStepsContainerRemoved:hi,updateStepContent:di,reloadSteps:pi,updateExperienceContext:vi,updateExperienceInstanceId:yi,cleanStepMachines:gi,startStepMachine:u,runExperienceBeginHooks:o,runExperienceEndHooks:a,createGlobalThemeComponent:bn,removeGlobalThemeComponent:En,startThemeRemovalListener:Sn,cleanRunOnceTraits:mi,...d.experienceActions,blockEvent:d.helpers.blockEvent},services:{runGlobalExperienceTraits:l,hooksService:s,globalThemeRemovalService:wn},guards:{isEventEnabled:d.helpers.isEventEnabled,areAllStepsStopped:t=>Object.values(t.stepMachines).every((t=>t.state.done)),doesStepInstanceExist:(t,e)=>void 0!==t.stepMachines?.[e.id]}})},Ai=gr([Nr,zr,Wr,$r,Cr],void 0,{experimental:{fragments:!0}});const Ni=()=>{let t=null;return{onRender:(e,n)=>{!t&&!e||(t||(t=function(t){const e=document.createElement("div");return t.append(e),Ai(e,br("div"))}(e)),t=Ai(t,n))},onRenderReset:()=>{t=null}}};var Ii,ji,Pi,Di,Hi,Li,$i={};function Mi(){if(Di)return Pi;Di=1;var t=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,e=(ji||(ji=1,Ii={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Ii);return Pi=function(n){var r,i=0,o=!0,a={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return n.replace(t,(function(t){if("="===t)return o=!0,void i++;o?0===i?((e[t]||"/"===n.charAt(n.length-2))&&(a.voidElement=!0),a.name=t):(a.attrs[r]=t.replace(/^['"]|['"]$/g,""),r=void 0):(r&&(a.attrs[r]=r),r=t),i++,o=!1})),a}}const zi=function(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if("function"==typeof e){var n=function t(){var n=!1;try{n=this instanceof t}catch{}return n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})})),n}(Gr);var Vi,Ui,Fi,Bi,Wi={};function qi(){if(Ui)return $i;Ui=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.context||document;if(!t)return null;var i=[],o=a((0,n.default)(t),i,r),c=void 0;return c=o?1===o.length?o[0]:o:s({type:"text",content:t},i,r),e.hooks&&e.hooks.create&&i.forEach((function(t){e.hooks.create(t)})),c};var t,e=function(){if(Li)return Hi;Li=1;var t=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,e=Mi(),n=Object.create?Object.create(null):{};function r(t,e,n,r,i){var o=e.indexOf("<",r),a=e.slice(r,-1===o?void 0:o);/^\s*$/.test(a)&&(a=" "),(!i&&o>-1&&n+t.length>=0||" "!==a)&&t.push({type:"text",content:a})}return Hi=function(i,o){o||(o={}),o.components||(o.components=n);var a,s=[],c=-1,u=[],l={},d=!1;return i.replace(t,(function(t,n){if(d){if(t!=="</"+a.name+">")return;d=!1}var f,p="/"!==t.charAt(1),h=0===t.indexOf("\x3c!--"),v=n+t.length,y=i.charAt(v);p&&!h&&(c++,"tag"===(a=e(t)).type&&o.components[a.name]&&(a.type="component",d=!0),!a.voidElement&&!d&&y&&"<"!==y&&r(a.children,i,c,v,o.ignoreWhitespace),l[a.tagName]=a,0===c&&s.push(a),(f=u[c-1])&&f.children.push(a),u[c]=a),(h||!p||a.voidElement)&&(h||c--,!d&&"<"!==y&&y&&r(f=-1===c?s:u[c].children,i,c,v,o.ignoreWhitespace))})),!s.length&&i.length&&r(s,i,0,0,o.ignoreWhitespace),s}}(),n=(t=e)&&t.__esModule?t:{default:t},r=zi,i=function(){if(Vi)return Wi;Vi=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.createTextVNode=function(e,n){return(0,t.vnode)(void 0,void 0,void 0,r(e,n))},Wi.transformName=function(t){return""+(t=t.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()}))).charAt(0).toLowerCase()+t.substring(1)},Wi.unescapeEntities=r;var t=zi,e=new RegExp("&[a-z0-9#]+;","gi"),n=null;function r(t,r){return n||(n=r.createElement("div")),t.replace(e,(function(t){return n.innerHTML=t,n.textContent}))}return Wi}();function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e,n){if(t instanceof Array&&t.length>0)return t.map((function(t){return s(t,e,n)}))}function s(t,e,n){var s=void 0;return s="text"===t.type?(0,i.createTextVNode)(t.content,n):(0,r.h)(t.name,function(t,e){var n={};if(!t.attrs)return n;var r=Object.keys(t.attrs).reduce((function(n,r){if("style"!==r&&"class"!==r){var a=(0,i.unescapeEntities)(t.attrs[r],e);n?n[r]=a:n=o({},r,a)}return n}),null);r&&(n.attrs=r);var a=function(t){try{return t.attrs.style.split(";").reduce((function(t,e){var n=e.split(":"),r=(0,i.transformName)(n[0].trim());if(r){var a=n[1].replace("!important","").trim();t?t[r]=a:t=o({},r,a)}return t}),null)}catch{return null}}(t);a&&(n.style=a);var s=function(t){try{return t.attrs.class.split(" ").reduce((function(t,e){return(e=e.trim())&&(t?t[e]=!0:t=o({},e,!0)),t}),null)}catch{return null}}(t);return s&&(n.class=s),n}(t,n),a(t.children,e,n)),e.push(s),s}return $i}const Xi=ve((Bi||(Bi=1,Fi=qi()),Fi)),Gi="data-interaction-style",Ki=({nodeId:t,interactionId:e,state:n})=>{const r=e?`[${Gi}="${e}"]`:`#${t}`;return Object.keys(n).map((t=>`${r}:${t} {\n        ${Object.entries(n[t]).map((([t,e])=>`${(t=>t.replace(/([A-Z])/g,(t=>`-${t[0].toLowerCase()}`)))(t)}:${e} !important`)).join(";")}\n      }`)).join(" ")},Ji=t=>t.data&&t.data.attrs?t.data.attrs.id:void 0,Zi=(t,e)=>Object.keys(e).reduce(((t,n)=>({...t,[n]:{...t[n],...e[n]}})),t.data||{}),Yi=(t,e)=>{t&&(e(t),t.children&&t.children.forEach((t=>Yi(t,e))))},Qi=t=>{if("string"==typeof t)return(t=>t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39;/g,"'").replace(/&quot;/g,'"'))(t);if(null==t)return Er([]);const{is:e="div",children:n=[],style:r,...i}=t.props,{state:o,...a}=r??{},s=t.props.id,c=t.props[Gi],u=br(e,{...Object.keys(a).length>0&&{style:a},...Object.keys(i).length>0&&{attrs:i}},n.map(Qi));return o?Er([br("style",Ki({nodeId:s,interactionId:c,state:o})),u]):u},to=(t,e)=>{const n=Ji(t),r=e(n)??{};return{...t,data:Zi(t,r),children:t.children?.map((t=>to(t,e)))}},eo=Object.freeze(Object.defineProperty({__proto__:null,applyOverridesToVnode:to,createStyleState:Ki,createVnodeTree:Qi,findId:Ji,injectHandlers:(t,e)=>(t.data={...t.data,on:e.on,hook:e.hook},t),mergeVnodeData:Zi,traverseTree:Yi,virtualizeContent:Xi,wrapContent:({step:t})=>{const e=pn(t.id),n=br("div",{attrs:{[an]:e},style:{width:"100%"}},[t.virtualizedContent]);return{step:{...t,virtualizedContent:n}}}},Symbol.toStringTag,{value:"Module"})),no=(t,e)=>e.includes(t.data?.attrs?.id)&&"string"!=typeof t.data?.attrs?.tabindex&&"number"!=typeof t.data?.attrs?.tabIndex,ro=Object.freeze(Object.defineProperty({__proto__:null,makeElementsAccessible:({virtualizedContent:t,index:e},{interactiveEls:n=[],focusableEls:r=[]})=>(Yi(t,(t=>{no(t,n)?(t=>{t.data.attrs.tabindex=0,t.sel="button",t.data.style={...t.data.style,border:t.data?.style?.border??"none",...t?.children?.length>0&&{backgroundColor:t.data?.style?.backgroundColor??"transparent"}}})(t):no(t,r)&&(t.data.attrs={...t.data.attrs,tabindex:0,role:"dialog","aria-labelledby":`content-${e}`,"aria-describedby":`content-${e}`}),t.data?.class?.canvas&&(t.data.attrs={...t.data.attrs,id:`content-${e}`})})),t)},Symbol.toStringTag,{value:"Module"}));er("@appcues/redirectTo",(({url:t="",openInNewWindow:e=!1}={},{reportError:n})=>{t?window.open(t,e?"_blank":"_self","noopener"):n("Can't redirect to undefined URL")})),er("@appcues/trackEvent",(({name:t,properties:e={}},{sendCustomEvent:n})=>{n(t,e)})),er("@appcues/triggerFlow",(({flowId:t,url:e,prefetch:n=!1}={},{showFlow:r})=>{r({flowId:t,url:e,prefetch:n})}));const io=t=>Object.entries(t).reduce(((t,[e,n])=>{if((t=>"string"==typeof t&&t.startsWith("{")&&t.endsWith("}"))(n)){const r=(t=>"date.now"===t?Date.now():null)(n.slice(1,-1));return{...t,[e]:r??n}}return{...t,[e]:n}}),{});er("@appcues/setUserProperties",((t,{updateUserProfile:e})=>{if(!(t=>0===Object.keys(t).length)(t)){e(io(t))}})),er("@appcues/toggleActions",(({actions:t=[],target:e}={},n)=>{const r=n.querySelector(e.selector);0!==r.length&&t.forEach((t=>{const e=`toggleActions_${t.id}`,i=n.getAction(t.type),[o]=r,a=!o.getAttribute(e);i&&a&&(i(t.config,n),o.setAttribute(e,!0)),a||o.removeAttribute(e)}))}));const oo=/([\.\*\+\^\$\[\]\\\(\)\|\{\}\,\-\:\?])/g,ao=/^([a-zA-Z]{2,3}|[a-zA-Z]{5,8})(-[a-zA-Z]{4})?(-(?:[a-zA-Z]{2}|\d{3}))?(-(?:[a-zA-Z\d]{5,8}|\d[a-zA-Z\d]{3}))?$/;class so{constructor(t){if("string"!=typeof t)throw new TypeError("A string argument is expected");if(!ao.test(t))throw new RangeError("A proper locale must be provided");this._locale=t}static _escapeRegExpPattern(t){return"string"!=typeof t?t:t.replace(oo,"\\$1")}static _toLowerCase(t,e){return"string"!=typeof t?e&&t:t.toLowerCase()}static _toUpperCase(t,e){return"string"!=typeof t?e&&t:t.toUpperCase()}static _trim(t,e,n){const r=[];let i;const o=function(t){r.push("^"+t+"+|"+t+"+$")};if("boolean"==typeof e&&(n=e,e=null),"string"!=typeof t)return n?t:void 0;if(Array.isArray(e)&&e.map((t=>{const e=this._escapeRegExpPattern(t);o(e)})),"string"==typeof e){const t=this._escapeRegExpPattern(e);o(t)}e||o("\\s");const a="("+r.join("|")+")";for(i=new RegExp(a,"g");t.match(i);)t=t.replace(i,"");return t}static _parseLocale(t){if("string"!=typeof t)return;const e=ao.exec(t);let n,r,i;if(!t||!e)return;const o=this._trim(e[2],["-","_"]),a=this._trim(e[3],["-","_"]);return n=this._toLowerCase(e[1]),r=this._toLowerCase(o)||r,i=this._toUpperCase(a)||i,{lang:n,script:r,countryCode:i}}_isRtlLang(){const{lang:t,script:e}=so._parseLocale(this._locale);return e?so._RTL_SCRIPTS.indexOf(e)>=0:so._BIDI_RTL_LANGS.indexOf(t)>=0}get textInfo(){return{direction:this._isRtlLang()?"rtl":"ltr"}}}so._RTL_SCRIPTS=["adlm","arab","armi","avst","chrs","cprt","elym","hatr","hebr","hung","khar","lydi","mand","mani","mend","merc","mero","narb","nbat","nkoo","orkh","ougr","palm","phli","phlp","phnx","prti","rohg","samr","sarb","sogd","sogo","syrc","thaa","yezi"],so._BIDI_RTL_LANGS=["ae","aeb","ajt","apc","apd","ar","ara","arb","arc","arq","ars","ary","arz","ave","avl","bal","bcc","bej","bft","bgn","bqi","brh","cja","ckb","cld","dcc","dgl","div","drw","dv","fa","fas","fia","fub","gbz","gjk","gju","glk","grc","gwc","gwt","haz","he","heb","hnd","hno","iw","ji","kas","kby","khw","ks","kvx","kxp","kzh","lad","lah","lki","lrc","luz","mde","mfa","mki","mvy","myz","mzn","nqo","oru","ota","otk","oui","pal","pbu","per","pes","phl","phn","pnb","pra","prd","prs","ps","pus","rhg","rmt","scl","sd","sdh","shu","skr","smp","snd","sog","swb","syr","tnf","trw","ug","uig","ur","urd","wni","xco","xld","xmn","xmr","xna","xpr","xsa","ydd","yi","yid","zdj"];Zn("@appcues/content-direction",(({addHook:t})=>{t("step.begin",(({step:t,updateRootStyle:e})=>{const n=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage,{currentLanguage:r=n,forceDirection:i=null}=t.getTraitConfig(),o=function(t){try{return new so(t).textInfo}catch{return{direction:"ltr"}}}(r);e({direction:i??o.direction},{forceUpdate:!0})}))}));const co=["top","right","bottom","left"],uo=["start","end"],lo=co.reduce(((t,e)=>t.concat(e,e+"-"+uo[0],e+"-"+uo[1])),[]),fo=Math.min,po=Math.max,ho=Math.round,vo=t=>({x:t,y:t}),yo={left:"right",right:"left",bottom:"top",top:"bottom"},go={start:"end",end:"start"};function mo(t,e,n){return po(t,fo(e,n))}function bo(t,e){return"function"==typeof t?t(e):t}function Eo(t){return t.split("-")[0]}function xo(t){return t.split("-")[1]}function wo(t){return"x"===t?"y":"x"}function So(t){return"y"===t?"height":"width"}function _o(t){return["top","bottom"].includes(Eo(t))?"y":"x"}function To(t){return wo(_o(t))}function Oo(t){return t.replace(/left|right|bottom|top/g,(t=>yo[t]))}function Ro(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function ko(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function Co(t,e,n){let{reference:r,floating:i}=t;const o=_o(e),a=To(e),s=So(a),c=Eo(e),u="y"===o,l=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[s]/2-i[s]/2;let p;switch(c){case"top":p={x:l,y:r.y-i.height};break;case"bottom":p={x:l,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(xo(e)){case"start":p[a]-=f*(n&&u?-1:1);break;case"end":p[a]+=f*(n&&u?-1:1)}return p}async function Ao(t,e){var n;void 0===e&&(e={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:l="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=bo(e,t),h=Ro(p),v=s[f?"floating"===d?"reference":"floating":d],y=ko(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(v)))||n?v:v.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:u,rootBoundary:l,strategy:c})),g="floating"===d?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,m=await(null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),b=await(null==o.isElement?void 0:o.isElement(m))&&await(null==o.getScale?void 0:o.getScale(m))||{x:1,y:1},E=ko(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:g,offsetParent:m,strategy:c}):g);return{top:(y.top-E.top+h.top)/b.y,bottom:(E.bottom-y.bottom+h.bottom)/b.y,left:(y.left-E.left+h.left)/b.x,right:(E.right-y.right+h.right)/b.x}}function No(t,e,n){return(t?[...n.filter((e=>xo(e)===t)),...n.filter((e=>xo(e)!==t))]:n.filter((t=>Eo(t)===t))).filter((n=>!t||(xo(n)===t||!!e&&function(t){return t.replace(/start|end/g,(t=>go[t]))}(n)!==n)))}function Io(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function jo(t){return co.some((e=>t[e]>=0))}function Po(t){return Lo(t)?(t.nodeName||"").toLowerCase():"#document"}function Do(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function Ho(t){var e;return null==(e=(Lo(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function Lo(t){return t instanceof Node||t instanceof Do(t).Node}function $o(t){return t instanceof Element||t instanceof Do(t).Element}function Mo(t){return t instanceof HTMLElement||t instanceof Do(t).HTMLElement}function zo(t){return!(typeof ShadowRoot>"u")&&(t instanceof ShadowRoot||t instanceof Do(t).ShadowRoot)}function Vo(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Xo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Uo(t){return["table","td","th"].includes(Po(t))}function Fo(t){return[":popover-open",":modal"].some((e=>{try{return t.matches(e)}catch{return!1}}))}function Bo(t){const e=Wo(),n=$o(t)?Xo(t):t;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!e&&!!n.backdropFilter&&"none"!==n.backdropFilter||!e&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((t=>(n.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(n.contain||"").includes(t)))}function Wo(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function qo(t){return["html","body","#document"].includes(Po(t))}function Xo(t){return Do(t).getComputedStyle(t)}function Go(t){return $o(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ko(t){if("html"===Po(t))return t;const e=t.assignedSlot||t.parentNode||zo(t)&&t.host||Ho(t);return zo(e)?e.host:e}function Jo(t){const e=Ko(t);return qo(e)?t.ownerDocument?t.ownerDocument.body:t.body:Mo(e)&&Vo(e)?e:Jo(e)}function Zo(t,e,n){var r;void 0===e&&(e=[]),void 0===n&&(n=!0);const i=Jo(t),o=i===(null==(r=t.ownerDocument)?void 0:r.body),a=Do(i);if(o){const t=Yo(a);return e.concat(a,a.visualViewport||[],Vo(i)?i:[],t&&n?Zo(t):[])}return e.concat(i,Zo(i,[],n))}function Yo(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Qo(t){const e=Xo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Mo(t),o=i?t.offsetWidth:n,a=i?t.offsetHeight:r,s=ho(n)!==o||ho(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function ta(t){return $o(t)?t:t.contextElement}function ea(t){const e=ta(t);if(!Mo(e))return vo(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=Qo(e);let a=(o?ho(n.width):n.width)/r,s=(o?ho(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const na=vo(0);function ra(t){const e=Do(t);return Wo()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:na}function ia(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=!1);const i=t.getBoundingClientRect(),o=ta(t);let a=vo(1);e&&(r?$o(r)&&(a=ea(r)):a=ea(t));const s=function(t,e,n){return void 0===e&&(e=!1),!(!n||e&&n!==Do(t))&&e}(o,n,r)?ra(o):vo(0);let c=(i.left+s.x)/a.x,u=(i.top+s.y)/a.y,l=i.width/a.x,d=i.height/a.y;if(o){const t=Do(o),e=r&&$o(r)?Do(r):r;let n=t,i=Yo(n);for(;i&&r&&e!==n;){const t=ea(i),e=i.getBoundingClientRect(),r=Xo(i),o=e.left+(i.clientLeft+parseFloat(r.paddingLeft))*t.x,a=e.top+(i.clientTop+parseFloat(r.paddingTop))*t.y;c*=t.x,u*=t.y,l*=t.x,d*=t.y,c+=o,u+=a,n=Do(i),i=Yo(n)}}return ko({width:l,height:d,x:c,y:u})}function oa(t){return ia(Ho(t)).left+Go(t).scrollLeft}function aa(t,e,n){let r;if("viewport"===e)r=function(t,e){const n=Do(t),r=Ho(t),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,c=0;if(i){o=i.width,a=i.height;const t=Wo();(!t||t&&"fixed"===e)&&(s=i.offsetLeft,c=i.offsetTop)}return{width:o,height:a,x:s,y:c}}(t,n);else if("document"===e)r=function(t){const e=Ho(t),n=Go(t),r=t.ownerDocument.body,i=po(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=po(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+oa(t);const s=-n.scrollTop;return"rtl"===Xo(r).direction&&(a+=po(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}(Ho(t));else if($o(e))r=function(t,e){const n=ia(t,!0,"fixed"===e),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Mo(t)?ea(t):vo(1);return{width:t.clientWidth*o.x,height:t.clientHeight*o.y,x:i*o.x,y:r*o.y}}(e,n);else{const n=ra(t);r={...e,x:e.x-n.x,y:e.y-n.y}}return ko(r)}function sa(t,e){const n=Ko(t);return!(n===e||!$o(n)||qo(n))&&("fixed"===Xo(n).position||sa(n,e))}function ca(t,e){const n=e.get(t);if(n)return n;let r=Zo(t,[],!1).filter((t=>$o(t)&&"body"!==Po(t))),i=null;const o="fixed"===Xo(t).position;let a=o?Ko(t):t;for(;$o(a)&&!qo(a);){const e=Xo(a),n=Bo(a);!n&&"fixed"===e.position&&(i=null),(o?!n&&!i:!n&&"static"===e.position&&i&&["absolute","fixed"].includes(i.position)||Vo(a)&&!n&&sa(t,a))?r=r.filter((t=>t!==a)):i=e,a=Ko(a)}return e.set(t,r),r}function ua(t,e,n){const r=Mo(e),i=Ho(e),o="fixed"===n,a=ia(t,!0,o,e);let s={scrollLeft:0,scrollTop:0};const c=vo(0);if(r||!r&&!o)if(("body"!==Po(e)||Vo(i))&&(s=Go(e)),r){const t=ia(e,!0,o,e);c.x=t.x+e.clientLeft,c.y=t.y+e.clientTop}else i&&(c.x=oa(i));return{x:a.left+s.scrollLeft-c.x,y:a.top+s.scrollTop-c.y,width:a.width,height:a.height}}function la(t){return"static"===Xo(t).position}function da(t,e){return Mo(t)&&"fixed"!==Xo(t).position?e?e(t):t.offsetParent:null}function fa(t,e){const n=Do(t);if(Fo(t))return n;if(!Mo(t)){let e=Ko(t);for(;e&&!qo(e);){if($o(e)&&!la(e))return e;e=Ko(e)}return n}let r=da(t,e);for(;r&&Uo(r)&&la(r);)r=da(r,e);return r&&qo(r)&&la(r)&&!Bo(r)?n:r||function(t){let e=Ko(t);for(;Mo(e)&&!qo(e);){if(Bo(e))return e;if(Fo(e))return null;e=Ko(e)}return null}(t)||n}const pa={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o="fixed"===i,a=Ho(r),s=!!e&&Fo(e.floating);if(r===a||s&&o)return n;let c={scrollLeft:0,scrollTop:0},u=vo(1);const l=vo(0),d=Mo(r);if((d||!d&&!o)&&(("body"!==Po(r)||Vo(a))&&(c=Go(r)),Mo(r))){const t=ia(r);u=ea(r),l.x=t.x+r.clientLeft,l.y=t.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+l.x,y:n.y*u.y-c.scrollTop*u.y+l.y}},getDocumentElement:Ho,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[..."clippingAncestors"===n?Fo(e)?[]:ca(e,this._c):[].concat(n),r],a=o[0],s=o.reduce(((t,n)=>{const r=aa(e,n,i);return t.top=po(r.top,t.top),t.right=fo(r.right,t.right),t.bottom=fo(r.bottom,t.bottom),t.left=po(r.left,t.left),t}),aa(e,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:fa,getElementRects:async function(t){const e=this.getOffsetParent||fa,n=this.getDimensions,r=await n(t.floating);return{reference:ua(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:n}=Qo(t);return{width:e,height:n}},getScale:ea,isElement:$o,isRTL:function(t){return"rtl"===Xo(t).direction}},ha=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:a,middlewareData:s}=e,c=await async function(t,e){const{placement:n,platform:r,elements:i}=t,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),a=Eo(n),s=xo(n),c="y"===_o(n),u=["left","top"].includes(a)?-1:1,l=o&&c?-1:1,d=bo(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:h}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&"number"==typeof h&&(p="end"===s?-1*h:h),c?{x:p*l,y:f*u}:{x:f*u,y:p*l}}(e,t);return a===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:a}}}}},va=function(t){return void 0===t&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,i;const{rects:o,middlewareData:a,placement:s,platform:c,elements:u}=e,{crossAxis:l=!1,alignment:d,allowedPlacements:f=lo,autoAlignment:p=!0,...h}=bo(t,e),v=void 0!==d||f===lo?No(d||null,p,f):f,y=await Ao(e,h),g=(null==(n=a.autoPlacement)?void 0:n.index)||0,m=v[g];if(null==m)return{};const b=function(t,e,n){void 0===n&&(n=!1);const r=xo(t),i=To(t),o=So(i);let a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=Oo(a)),[a,Oo(a)]}(m,o,await(null==c.isRTL?void 0:c.isRTL(u.floating)));if(s!==m)return{reset:{placement:v[0]}};const E=[y[Eo(m)],y[b[0]],y[b[1]]],x=[...(null==(r=a.autoPlacement)?void 0:r.overflows)||[],{placement:m,overflows:E}],w=v[g+1];if(w)return{data:{index:g+1,overflows:x},reset:{placement:w}};const S=x.map((t=>{const e=xo(t.placement);return[t.placement,e&&l?t.overflows.slice(0,2).reduce(((t,e)=>t+e),0):t.overflows[0],t.overflows]})).sort(((t,e)=>t[1]-e[1])),_=(null==(i=S.filter((t=>t[2].slice(0,xo(t[0])?2:3).every((t=>t<=0))))[0])?void 0:i[0])||S[0][0];return _!==s?{data:{index:g+1,overflows:x},reset:{placement:_}}:{}}}},ya=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...c}=bo(t,e),u={x:n,y:r},l=await Ao(e,c),d=_o(Eo(i)),f=wo(d);let p=u[f],h=u[d];if(o){const t="y"===f?"bottom":"right";p=mo(p+l["y"===f?"top":"left"],p,p-l[t])}if(a){const t="y"===d?"bottom":"right";h=mo(h+l["y"===d?"top":"left"],h,h-l[t])}const v=s.fn({...e,[f]:p,[d]:h});return{...v,data:{x:v.x-n,y:v.y-r}}}}},ga=function(t){return void 0===t&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=bo(t,e);switch(r){case"referenceHidden":{const t=Io(await Ao(e,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:t,referenceHidden:jo(t)}}}case"escaped":{const t=Io(await Ao(e,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:t,escaped:jo(t)}}}default:return{}}}}},ma=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:a,elements:s,middlewareData:c}=e,{element:u,padding:l=0}=bo(t,e)||{};if(null==u)return{};const d=Ro(l),f={x:n,y:r},p=To(i),h=So(p),v=await a.getDimensions(u),y="y"===p,g=y?"top":"left",m=y?"bottom":"right",b=y?"clientHeight":"clientWidth",E=o.reference[h]+o.reference[p]-f[p]-o.floating[h],x=f[p]-o.reference[p],w=await(null==a.getOffsetParent?void 0:a.getOffsetParent(u));let S=w?w[b]:0;(!S||!await(null==a.isElement?void 0:a.isElement(w)))&&(S=s.floating[b]||o.floating[h]);const _=E/2-x/2,T=S/2-v[h]/2-1,O=fo(d[g],T),R=fo(d[m],T),k=O,C=S-v[h]-R,A=S/2-v[h]/2+_,N=mo(k,A,C),I=!c.arrow&&null!=xo(i)&&A!==N&&o.reference[h]/2-(A<k?O:R)-v[h]/2<0,j=I?A<k?A-k:A-C:0;return{[p]:f[p]+j,data:{[p]:N,centerOffset:A-N-j,...I&&{alignmentOffset:j}},reset:I}}}),ba=(t,e,n)=>{const r=new Map,i={platform:pa,...n},o={...i.platform,_c:r};return(async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,s=o.filter(Boolean),c=await(null==a.isRTL?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:l,y:d}=Co(u,r,c),f=r,p={},h=0;for(let n=0;n<s.length;n++){const{name:o,fn:v}=s[n],{x:y,y:g,data:m,reset:b}=await v({x:l,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:u,platform:a,elements:{reference:t,floating:e}});l=y??l,d=g??d,p={...p,[o]:{...p[o],...m}},b&&h<=50&&(h++,"object"==typeof b&&(b.placement&&(f=b.placement),b.rects&&(u=!0===b.rects?await a.getElementRects({reference:t,floating:e,strategy:i}):b.rects),({x:l,y:d}=Co(u,f,c))),n=-1)}return{x:l,y:d,placement:f,strategy:i,middlewareData:p}})(t,e,{...i,platform:o})};var Ea,xa;var wa=function(){if(xa)return Ea;xa=1;var t=/^\s+|\s+$/g,e=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,r=/^0o[0-7]+$/i,i=parseInt,o="object"==typeof he&&he&&he.Object===Object&&he,a="object"==typeof self&&self&&self.Object===Object&&self,s=o||a||Function("return this")(),c=Object.prototype.toString,u=Math.max,l=Math.min,d=function(){return s.Date.now()};function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function p(o){if("number"==typeof o)return o;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==c.call(t)}(o))return NaN;if(f(o)){var a="function"==typeof o.valueOf?o.valueOf():o;o=f(a)?a+"":a}if("string"!=typeof o)return 0===o?o:+o;o=o.replace(t,"");var s=n.test(o);return s||r.test(o)?i(o.slice(2),s?2:8):e.test(o)?NaN:+o}return Ea=function(t,e,n){var r,i,o,a,s,c,h=0,v=!1,y=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var n=r,o=i;return r=i=void 0,h=e,a=t.apply(o,n)}function b(t){var n=t-c;return void 0===c||n>=e||n<0||y&&t-h>=o}function E(){var t=d();if(b(t))return x(t);s=setTimeout(E,function(t){var n=e-(t-c);return y?l(n,o-(t-h)):n}(t))}function x(t){return s=void 0,g&&r?m(t):(r=i=void 0,a)}function w(){var t=d(),n=b(t);if(r=arguments,i=this,c=t,n){if(void 0===s)return function(t){return h=t,s=setTimeout(E,e),v?m(t):a}(c);if(y)return s=setTimeout(E,e),m(c)}return void 0===s&&(s=setTimeout(E,e)),a}return e=p(e)||0,f(n)&&(v=!!n.leading,o=(y="maxWait"in n)?u(p(n.maxWait)||0,e):o,g="trailing"in n?!!n.trailing:g),w.cancel=function(){void 0!==s&&clearTimeout(s),h=0,r=c=i=s=void 0},w.flush=function(){return void 0===s?a:x(d())},w},Ea}();const Sa=ve(wa);var _a,Ta;const Oa=ve(function(){if(Ta)return _a;Ta=1;var t="__lodash_hash_undefined__",e="[object Function]",n="[object GeneratorFunction]",r=/^\[object .+?Constructor\]$/,i="object"==typeof he&&he&&he.Object===Object&&he,o="object"==typeof self&&self&&self.Object===Object&&self,a=i||o||Function("return this")();function s(t,e){return!!(t?t.length:0)&&function(t,e,n){if(e!=e)return function(t,e,n){for(var r=t.length,i=n+-1;++i<r;)if(e(t[i],i,t))return i;return-1}(t,c,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,0)>-1}function c(t){return t!=t}function u(t,e){return t.has(e)}function l(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var d,f=Array.prototype,p=Function.prototype,h=Object.prototype,v=a["__core-js_shared__"],y=(d=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",g=p.toString,m=h.hasOwnProperty,b=h.toString,E=RegExp("^"+g.call(m).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=f.splice,w=j(a,"Map"),S=j(a,"Set"),_=j(Object,"create");function T(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function O(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function R(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function k(t){var e=-1,n=t?t.length:0;for(this.__data__=new R;++e<n;)this.add(t[e])}function C(t,e){for(var n=t.length;n--;)if(P(t[n][0],e))return n;return-1}function A(t){if(!D(t)||function(t){return!!y&&y in t}(t))return!1;var i=function(t){var r=D(t)?b.call(t):"";return r==e||r==n}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch{}return e}(t)?E:r;return i.test(function(t){if(null!=t){try{return g.call(t)}catch{}try{return t+""}catch{}}return""}(t))}T.prototype.clear=function(){this.__data__=_?_(null):{}},T.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},T.prototype.get=function(e){var n=this.__data__;if(_){var r=n[e];return r===t?void 0:r}return m.call(n,e)?n[e]:void 0},T.prototype.has=function(t){var e=this.__data__;return _?void 0!==e[t]:m.call(e,t)},T.prototype.set=function(e,n){return this.__data__[e]=_&&void 0===n?t:n,this},O.prototype.clear=function(){this.__data__=[]},O.prototype.delete=function(t){var e=this.__data__,n=C(e,t);return!(n<0)&&(n==e.length-1?e.pop():x.call(e,n,1),!0)},O.prototype.get=function(t){var e=this.__data__,n=C(e,t);return n<0?void 0:e[n][1]},O.prototype.has=function(t){return C(this.__data__,t)>-1},O.prototype.set=function(t,e){var n=this.__data__,r=C(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},R.prototype.clear=function(){this.__data__={hash:new T,map:new(w||O),string:new T}},R.prototype.delete=function(t){return I(this,t).delete(t)},R.prototype.get=function(t){return I(this,t).get(t)},R.prototype.has=function(t){return I(this,t).has(t)},R.prototype.set=function(t,e){return I(this,t).set(t,e),this},k.prototype.add=k.prototype.push=function(e){return this.__data__.set(e,t),this},k.prototype.has=function(t){return this.__data__.has(t)};var N=S&&1/l(new S([,-0]))[1]==1/0?function(t){return new S(t)}:function(){};function I(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function j(t,e){var n=function(t,e){return t?.[e]}(t,e);return A(n)?n:void 0}function P(t,e){return t===e||t!=t&&e!=e}function D(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}return _a=function(t){return t&&t.length?function(t,e,n){var r=-1,i=s,o=t.length,a=!0,c=[],d=c;if(o>=200){var f=N(t);if(f)return l(f);a=!1,i=u,d=new k}else d=c;t:for(;++r<o;){var p=t[r],h=p;if(p=0!==p?p:0,a&&h==h){for(var v=d.length;v--;)if(d[v]===h)continue t;c.push(p)}else i(d,h,n)||(d!==c&&d.push(h),c.push(p))}return c}(t):[]}}()),Ra=(t,e)=>{const n=t.slice(1);return e.find((({config:t,type:e})=>"@appcues/overlay"===e&&n===t.rootId))},ka=(t,e)=>e.includes("start")?t-16:t+16,Ca=t=>{try{const e=window.getComputedStyle(t),{overflow:n,overflowY:r,overflowX:i}=e,o=new Set([n,r,i]);if("fixed"===e.position||"sticky"===e.position||o.has("auto")||o.has("hidden"))return!0;const{host:a=null}=t?.getRootNode()??{},s=a?.tagName?.includes(rn)||a?.tagName?.includes(on);return null===t.parentElement&&a&&!s?Ca(a.parentElement):null!==t.parentElement&&t.parentElement!==document.body&&Ca(t.parentElement)}catch{return!1}};function Aa(t){return"fixed"===t||"relative"===t||"absolute"===t||"sticky"===t}function Na(t){return"flex"===t.display||"inline-flex"===t.display}function Ia(t,e,n,r,i){let o=i,a=e.zIndex;const s=e.position,c=t.parentElement,u=c?r.getComputedStyle(c):{};if(""!==a&&"auto"!==a&&!Aa(s)&&!Na(u)&&(a="auto"),(!o||""!==a&&"auto"!==a&&(Aa(s)||Na(u)))&&(o=a),c&&c!==n.body&&c!==n.documentElement)return Ia(c,u,n,r,o);if(/^\d+$/.test(o)){let t=Number.parseInt(o,10);t+=1,o=t}return o}const ja=t=>{const e=t.ownerDocument||document,n=e.defaultView||window;return Ia(t,n.getComputedStyle(t),e,n)},{addEventListener:Pa,removeEventListener:Da}=(()=>{const t=new Map;function e(e){e.composedPath().forEach((n=>{(t.get(n)??{})[e.type]?.map((t=>t(e)))}))}return{addEventListener:(n,r,i)=>{t.get(n)||t.set(n,{});const o=t.get(n);o[r]||(o[r]=[]),o[r].includes(i)||(o[r]=[...o[r],i],t.set(n,o)),1===o[r].length&&n.addEventListener(r,e,!0)},removeEventListener:(n,r,i)=>{const o=t.get(n);if(!o)return;const a=(o[r]??[]).filter((t=>t!==i));o[r]=a,t.set(n,o),0===o[r].length&&n.removeEventListener(r,e,!0)}}})(),Ha=(()=>{const t=new Map,e=new Map;return(n,r)=>{const i=t.get(r)??[];return t.set(r,[...i,n]),(n=>{if(e.has(n))return;const r=setInterval((()=>{t.get(n).forEach((t=>t()))}),n);e.set(n,r)})(r),()=>((n,r)=>{const i=t.get(r);if(i){const o=i.filter((t=>t!==n));if(o.length>0)return void t.set(r,o);const a=e.get(r);clearInterval(a),t.delete(r),e.delete(r)}})(n,r)}})(),La=(t,e)=>{if(!e)return t;const{order:n,text:r}=e;let i=[...t];return r&&""!==r&&(i=i.filter((t=>t.textContent.replace(/\r\n|\r|\n/g," ").toLowerCase().trim()===r.toString().toLowerCase().trim()))),null!=n?i.length>n?[i[n]]:[]:i},$a={top:"top","top-left":"top-start","top-right":"top-end",right:"right","right-top":"right-start","right-bottom":"right-end",bottom:"bottom","bottom-right":"bottom-end","bottom-left":"bottom-start",left:"left","left-bottom":"left-end","left-top":"left-start",center:"top-start"},Ma=t=>{let e,n,r,i,o,a=[],s=()=>{};const c=Sa((function(){t()}),100);function u(){const t=e.getBoundingClientRect();o&&(t.x!==o.x||t.y!==o.y||t.width!==o.width||t.height!==o.height)&&c(),o=t}return{setElements(t,i,o){return e=t,n=i,r=o,a=[],this},start(){r&&(a=Oa([...Zo(r)])),a.forEach((t=>{Pa(t,"scroll",c),Pa(t,"resize",c)})),i=new ResizeObserver(c),i.observe(n),o=e.getBoundingClientRect(),s=Ha(u,200)},remove(){a.forEach((t=>{Da(t,"scroll",c),Da(t,"resize",c)})),i?.unobserve(n),s()}}};Zn("@appcues/overlay",(({addHook:t,registerAction:e})=>{let n,r,i,o,a,s,c,u,l,d=!1,f=!1,p=!1,h="absolute";t("step.begin",(({onElementRemoved:t,querySelector:e,reportError:f,step:v,updateStyle:y})=>{const{traits:g}=v.getConfig(),{arrowId:m="arrow",target:b,rootId:E,placement:x="auto",distance:w,skidding:S,placementUnit:_="pixels",shouldAutoCalculateZIndex:T=!0}=v.getTraitConfig(),O=Ra(b.selector,g),R=g.find((t=>"@appcues/toggle"===t.type))?.config?.startHidden??!0;R||y(E,{position:"absolute"}),o=()=>{const t=v.querySelector(`#${E}`),n=v.querySelector(`#${m}`),r=La(e(b.selector),b.filters);return{matchingElements:r,targetEl:r[0],rootEl:t[0],arrowEl:n[0]}};const k=async()=>{const{targetEl:t,rootEl:e,arrowEl:n}=o();if(!d&&t&&e){d=!0;const r=(({placementUnit:t,distance:e,skidding:n,placement:r,targetEl:i})=>{const o=r.startsWith("left")||r.startsWith("right"),a=o?e:n,s=o?n:e;if("percentage"!==t||!i)return{mainAxis:e,crossAxis:n};const{width:c,height:u}=i.getBoundingClientRect();return{mainAxis:o?c*a/100:u*s/100,crossAxis:o?u*s/100:c*a/100}})({placement:x,targetEl:t,distance:w,skidding:S,placementUnit:_}),i=[ha((({placement:t})=>({...r,crossAxis:n&&/start|end/gm.test(t)?ka(S,t):r.crossAxis})))];"auto"===x&&i.push(ya(),va({crossAxis:!0})),n&&i.push(ma({element:n,padding:10})),i.push(ga());const{middlewareData:o,strategy:a,x:u,y:l,placement:f}=await ba(t,e,{middleware:i,placement:$a[x]??"auto",strategy:h}),{referenceHidden:v}=o.hide;if(n){const{x:t,y:e}=o.arrow;y(m,((t,e,n,r)=>{const{staticSide:i,offset:o,rotation:a,shadowOpacity:s}={top:{staticSide:"bottom",offset:"-5px",rotation:45,shadowOpacity:40},bottom:{staticSide:"top",offset:"-5px",rotation:225,shadowOpacity:7},right:{staticSide:"left",offset:"-5px",rotation:135,shadowOpacity:7},left:{staticSide:"right",offset:"-5px",rotation:-45,shadowOpacity:40}}[t.split("-")[0]];return{boxShadow:`1px 1px 1px hsl(0deg 0% 13% / ${s}%)`,transform:`rotate(${a}deg)`,left:null!=e?`${e}px`:"",top:null!=n?`${n}px`:"",right:"",bottom:"",[i]:o,zIndex:r}})(f,t,e))}const g=(({targetEl:t,rootStyle:e,shouldAutoCalculateZIndex:n})=>{let r=e;if(n){const n=ja(t);r={...e,zIndex:n}}return r})({targetEl:t,rootStyle:{left:`${u}px`,position:a,top:`${l}px`},shouldAutoCalculateZIndex:T});"hidden"===t.style.visibility&&(g.visibility="hidden",c=t.style.visibility),v&&"hidden"!==e.style.visibility&&(s=e.style.visibility,p=!0,g.visibility="hidden"),!v&&p&&(g.visibility=s??"visible",p=!1),!v&&"hidden"!==t.style.visibility&&""!==t.style.visibility&&"hidden"===c&&(g.visibility="visible"),"center"===x&&(g.transform="translate(-50%, 50%)"),y(E,g)}};u=()=>{d=!1,k()},a=Ma(u);const C=()=>La(e(b.selector),b.filters);n=async()=>{r&&r(),i&&i();const{matchingElements:n,rootEl:s}=o(),c=1===n.length,u=n.length>1,p=0===n.length;if(c){const r=O?e(O.config.target.selector):null;if(R){const t=null!=r&&Ca(r[0]?.parentElement);h=Ca(n[0]?.parentElement)||t?"fixed":"absolute",y(E,{position:h})}return await k(),O||(i=t({getTarget:C,onRemoved:()=>{d=!1,l=f(`Target got removed => ${b.selector}`),a.remove()}})),void a.setElements(n[0],s,r?r[0]:null).start()}u&&f(`Found ${n.length} elements for selector ${b.selector}.`),p&&(l=f(`Could not find element for selector ${b.selector}.`))}})),t("step.postrender",(async()=>{f||(await n(),f=!0)})),t("step.end",(()=>{r&&r(),i&&i(),a.remove(),d=!1,f=!1})),t("step.error",(({step:t,onElementInserted:e,querySelector:n})=>{d=!1,f=!1;const{target:i}=t.getTraitConfig(),{traits:o}=t.getConfig();Ra(i.selector,o)||(r=e({getTarget:()=>La(n(i.selector),i.filters),onInserted:()=>{f=!1,t.recover({errorId:l})}}))}))})),Zn("@appcues/persistent",(({addHook:t})=>{t("experience.begin",(({steps:t})=>{t.map((t=>t.start()))}))}));const za={left:"beforebegin","inner-left":"afterbegin",right:"afterend","inner-right":"beforeend"};Zn("@appcues/inline",(function({addHook:t}){let e,n,r;t("step.begin",(({step:t,reportError:i,onElementRemoved:o,updateRootStyle:a,querySelector:s})=>{const{target:c,placement:u="right",verticalAlignment:l="bottom",allowOverlap:d=!1,xOffset:f=0,yOffset:p=0,distanceUnit:h="px",sticky:v=!1,rootDisplay:y="inline-block"}=t.getTraitConfig();e&&e(),n&&n();const g=La(s(c.selector),c.filters),m=1===g.length,b=g.length>1,E=0===g.length,x=()=>La(s(c.selector),c.filters);if(m){(e=>{const n=document.createElement("div");null!=e.insertAdjacentElement(za[u],n)?t.setStepContainerTarget(n):i(`can't insert inline container on the ${u}`)})(g[0]);const e={display:y,verticalAlign:l},{x:s,y:m}=(({distanceUnit:t,yOffset:e,xOffset:n,targetEl:r})=>{if("%"!==t||!r)return{x:`${n}px`,y:`${e}px`};const{width:i,height:o}=r.getBoundingClientRect();return{x:i*n/100+"px",y:o*e/100+"px"}})({distanceUnit:h,xOffset:f,yOffset:p,targetEl:g[0]});if(d)e.position="absolute",e.transform=`translate(${s}, ${m})`;else{e[`margin-${u.includes("left")?"right":"left"}`]=s,e[`margin-${l}`]=m}if(v){e.position="sticky";e[u.includes("left")?"top":"bottom"]=0,e.zIndex=9999}return a(e),void(n=o({getTarget:x,onRemoved:()=>{r=i(`Target got removed => ${c.selector}`)}}))}b&&i(`Found ${g.length} elements for selector ${c.selector}.`),E&&(r=i(`Could not find element for selector ${c.selector}.`))})),t("step.error",(({step:t,onElementInserted:n,querySelector:i})=>{const{target:o}=t.getTraitConfig();e=n({getTarget:()=>La(i(o.selector),o.filters),onInserted:()=>{t.recover({errorId:r})}})})),t("step.end",(()=>{e&&e(),n&&n()}))}));const Va=(t,e)=>({remove:()=>{t.removeEventListener("keydown",e),t.removeEventListener("click",e,!0)},start:()=>{t.addEventListener("click",e,!0),t.addEventListener("keydown",e)}}),Ua=(t,e,n)=>0===e.length?(n("Element not found"),!1):!(e.length>1)||(n(`More than one element found with id: ${t}`),!1),Fa="@appcues/toggle.style",Ba=({targetId:t,styles:e={}},{updateStyle:n})=>{n(t,e)},Wa={[Fa]:Ba};Zn("@appcues/toggle",(({addHook:t,registerAction:e},{startHidden:n=!0,targetId:r,transition:i,closeOnClickOutside:o=!0,closeRadius:a})=>{let s,c,u,l=!1,d=[],f=null;const p=()=>{d.forEach((t=>t.remove())),d=[]};n&&t("step.begin",(({updateStyle:t})=>{t(r,{opacity:"0",visibility:"hidden","pointer-events":"none"})})),t("step.end",(()=>{o&&p(),f?.remove(),f=null})),t("step.error",(()=>{o&&p(),f?.remove(),f=null}));const h=({on:t}={},e)=>{const{reportError:n,step:c,updateStyle:u}=e,d=c.querySelector(`#${r}`);if(!Ua(r,d,n))return;o&&p();const f={};i||(f.visibility="hidden",f["pointer-events"]="none"),u(r,{...f,opacity:"0"}),i&&setTimeout((()=>{u(r,{visibility:"hidden","pointer-events":"none"})}),1e3*i.duration),a&&l&&(Da(document,"mousemove",s),l=!1),t?.close?.forEach((t=>Wa[t.type](t.config,e)))},v=({on:t}={},e)=>{const{reportError:n,step:p,updateStyle:v}=e,y=p.querySelector(`#${r}`);if(!Ua(r,y,n))return;const g={};if(i&&(g.transition=`opacity ${i.duration}s ${i.easing}`),v(r,{...g,visibility:"visible",opacity:"1","pointer-events":"auto"}),t?.open?.forEach((t=>Wa[t.type](t.config,e))),o&&0===d.length){const n=p.querySelector(":first-child")[0];u=n=>{((t=>"Escape"===t.key)(n)||((t,e)=>![...t.composedPath()].filter((t=>t.nodeType===Node.ELEMENT_NODE)).some((t=>t?.contains?.(e)??!1)))(n,y[0]))&&h({on:t},e)},d.push(Va(document,u),Va(n,u)),d.forEach((t=>t.start()))}if(f||(c=n=>{if("keydown"===n.type&&!["Enter"," "].includes(n.key))return;const r=[...n.composedPath()];["a","button"].includes(r[0].tagName.toLowerCase())&&h({on:t},e)},f=Va(y[0],c),f.start()),a&&!l){const e=((t,e)=>{const{height:n,width:r}=t.getBoundingClientRect();return(e>0?e:0)+Math.floor(Math.sqrt(n**2+r**2)/4)})(y[0],a);s=Sa((r=>{((t,e,n)=>{const{height:r,width:i,left:o,top:a}=t.getBoundingClientRect();return Math.floor(Math.sqrt((e-(o+i/2))**2+(n-(a+r/2))**2)/2)})(y[0],r.clientX,r.clientY)>e&&h({on:t},{reportError:n,step:p,updateStyle:v})}),60),Pa(document,"mousemove",s),l=!0}};e("run",(({on:t}={},e)=>{const{step:n,reportError:i}=e,o=n.querySelector(`#${r}`);Ua(r,o,i)&&("hidden"!==getComputedStyle(o[0]).visibility?h({on:t},e):v({on:t},e))})),e("open",v),e("close",h),e("style",Ba)})),Zn("@appcues/coreEvents",(({registerAction:t})=>{t("step_seen",((t,{step:e})=>{e.seen()})),t("extended_event",(({name:t,...e},{step:n})=>{n.extendedEvent(t,e)})),t("step_interaction",((t,{step:e})=>{e.interaction(t.interactionType,t.interactionData)})),t("experience_dismissed",((t,{step:e})=>{e.dismissExperience()})),t("experience_snoozed",((t,{step:e})=>{e.snoozeExperience()}))}));Zn("@appcues/store",(({addHook:t,registerAction:e},{id:n,initialState:r={}})=>{let i;t("step.begin",(()=>{i=((t,e={})=>{let n=e;const r=[],i=t=>{const{el:e,callbackFn:i}=t.detail;r.push([e,i]),e[i].apply(t.target,[n])};return document.addEventListener(`${t}:connect`,i),{getState:()=>n,setState:t=>{n={...n,...t},r.forEach((([t,e])=>{t[e].apply(t,[n])}))},destroy:()=>{document.removeEventListener(`${t}:connect`,i)}}})(n,r)})),t("step.end",(()=>{i&&i.destroy()})),e("setState",(({stateKey:t},e,n)=>{i&&i.setState({[t]:n?.detail})}))}));const qa={slide_in_down:[{transform:"translate3d(0, -100%, 0)",visibility:"visible"},{transform:"translate3d(0, 0, 0)"}],slide_out_down:[{transform:"translate3d(0, 0, 0)",offset:0},{transform:"translate3d(0, 100%, 0)",offset:.99},{visibility:"hidden",offset:1}],slide_in_up:[{transform:"translate3d(0, 100%, 0)",visibility:"visible"},{transform:"translate3d(0, 0, 0)"}],pulse:[{transform:"scale3d(1, 1, 1)"},{transform:"scale3d(1.05, 1.05, 1.05)"},{transform:"scale3d(1, 1, 1)"}]},Xa=500,Ga="none",Ka=(t,e)=>new Promise((n=>{const{keyframes:r,duration:i=Xa,iterations:o,effect:a,fill:s=Ga,easing:c="linear"}=e,u=qa[a]||r,l={duration:i,iterations:o,fill:s,easing:c};if(!u)return;const d=t.animate(u,l);d?.addEventListener?d.addEventListener("finish",n,{once:!0}):n()}));Zn("@appcues/animate",(({addHook:t,registerAction:e},n)=>{t("step.postrender",(({querySelector:t})=>{const{target:e}=n;if(!e)return;const r=t(e.selector);0!==r.length&&Ka(r[0],n)})),e("toggle",(({toggleGroupId:t,target:e,animations:n},{querySelector:r})=>{const i=r(e.selector);if(0===i.length)return;const[o]=i,a=o.getAttribute(t)===n[0].id?n[1]:n[0];Ka(o,a),a.id&&o.setAttribute(t,a.id)})),e("run",(async(t,e)=>{const{querySelector:n,getAction:r}=e,{toggleGroupId:i,target:o,animation:a,ignoreToggleGroup:s=!1,onFinish:c=[]}=t;if(!o)return;const u=n(o.selector);if(0===u.length)return;const l=u[0],d=l.getAttribute(i);(!d||d===a.id)&&!s||(await Ka(l,a??t),c.forEach((t=>{r(t.type)(t?.config??{},e)})),s||l.setAttribute(i,a.id))}))}));const Ja={pixels:"px",percentage:"%"};function Za(t,e,n,r){const i=Ja[n]||"px";switch(t){case"left":return{left:0,transform:`translateX(${e}${i})`,...r&&{right:"unset"}};case"center":return{left:"50%",transform:`translateX(calc(-50% + ${e}${i}))`,...r&&{right:"unset"}};default:return{right:0,transform:`translateX(-${e}${i})`,...r&&{left:"unset"}}}}function Ya(t,e,n){const r=Ja[n]||"px";switch(t){case"top":return{top:0,transform:`translateY(${e}${r})`};case"center":return{top:"50%",transform:`translateY(calc(-50% + ${e}${r}))`};default:return{bottom:0,transform:`translateY(-${e}${r})`}}}Zn("@appcues/floating",(({addHook:t})=>{t("step.begin",(({step:t,updateStyle:e,updateRootStyle:n})=>{const{target:r,zIndex:i,strategy:o="fixed",xOffset:a=0,yOffset:s=0,xPosition:c="left",yPosition:u="top",placementUnit:l="pixels",unsetOppositeDirection:d=!1,applyToRoot:f=!1}=t.getTraitConfig(),p={position:o,..."number"===i?{zIndex:i}:{},...[Za(c,a,l,d),Ya(u,s,l)].reduce(((t,e)=>{const{transform:n,...r}=e;return n&&(t.transform=t.transform?`${t.transform} ${n}`:n),{...t,...r}}),{})};f?n(p,{forceUpdate:!0}):e(r.selector,p)}))}));function Qa(t){return`_experience_dismissed_${t}`}Zn("@appcues/dismissible",(({addHook:t,registerAction:e},{strategy:n="permanent"})=>{t("experience.begin",(({stopExperience:t,getExperienceId:e})=>{(function(t){return"session"===n&&"1"===window.sessionStorage.getItem(Qa(t))})(e())&&t()})),e("dismiss",((t,{stopExperience:e,updateUserProfile:r,getExperienceId:i})=>{const o=Qa(i());"session"===n?window.sessionStorage.setItem(o,"1"):"permanent"===n&&r({[o]:"permanently_dismissed"}),e()}))})),Zn("@appcues/experienceStyle",(({addHook:t},e)=>{t("step.begin",(({updateRootStyle:t})=>{t(e,{forceUpdate:!0})}))}));Zn("@appcues/rootStyle",(function({addHook:t}){t("step.begin",(({step:t,updateRootStyle:e})=>{e(t.getTraitConfig())}))}));var ts=function(t,e){return window.addEventListener(t,e),function(){return window.removeEventListener(t,e)}};Zn("@appcues/sdk-middleware-events",(({addHook:t},{onLaunchpadClose:e})=>{let n;t("step.begin",(t=>{n=function(t){return ts("appcues:launchpad_close",t)}((()=>{e.forEach((e=>{t.getAction(e.type)?.(e.config,t)}))}))})),t("step.end",(()=>{n?.()}))}));const es=(t,{querySelector:e,reportError:n})=>{const r=e(t),i=r.length>1,o=0===r.length;return i&&n("The target element is duplicated, please provide a more specific selector"),o&&n("The target element is not found"),r[0]};Zn("@appcues/knowledge-base-integration",(({addHook:t,registerAction:e},n)=>{const{integrationConnected:r=!1}=n;let i,o,a,s,c;const u=()=>{r&&o?.prev()},l=t=>{if(!r)return;const{integrationId:e}=n,{inputValue:u}=t.detail;a.setAttribute("searchTerm",u),a.setAttribute("state","loading"),i.setAttribute("loading",!0),s&&(s.scrollTop=0),o?.next(),function(t,e,n){var r=new CustomEvent("appcues:launchpad_search",{detail:{integrationId:t,query:e,experienceId:n}});window.dispatchEvent(r)}(e,u,c)};t("step.begin",(({getExperienceId:t})=>{c=t(),function(t,e){ts("".concat("appcues:launchpad_search_response",":").concat(t),e)}(c,(t=>{const e=t.detail,n=0===e.results?.length?"empty":"showing_results";a.setAttribute("state",n),a.setAttribute("results",JSON.stringify(e.results)),i.setAttribute("loading",!1)})),function(t,e){ts("".concat("appcues:launchpad_search_error",":").concat(t),e)}(c,(()=>{a.setAttribute("state","error"),i.setAttribute("loading",!1)}))})),t("step.end",(()=>{i?.removeEventListener("onSearch",l),i?.removeEventListener("onCancel",u)})),e("bindListeners",((t,e)=>{const{navigation:r}=n;(!o||!i)&&(o=es(r.selector,e),i=es("appcues-search-header",e),a=es("appcues-search-results",e),s=es("#launchpad-container",e),i?.addEventListener("onSearch",l),i?.addEventListener("onCancel",u))}))})),Zn("@appcues/sequential",(({addHook:t,registerAction:e})=>{let n;t("experience.begin",(({steps:t})=>{n=0,t[n].start()})),e("next",((t,{steps:e})=>{n!==e.length-1?(e[n].stop(),n+=1,e[n].start()):e[n].stop()})),e("prev",((t,{steps:e})=>{0!==n&&(e[n].stop(),n-=1,e[n].start())})),e("goTo",((t,{step:e,steps:r})=>{e.stop();const i=r.findIndex((e=>e.getConfig()?.id===t.stepId));-1!==i&&(n=i,r[n].start())}))}));class ns extends HTMLElement{constructor(){super(),this.hideContentStyles=document.createElement("style"),this.hideContentStyles.innerHTML="\n      * {\n        visibility: hidden;\n      }\n    ";try{this.attachShadow({mode:"open"})}catch{}this.webComponentStyles=document.createElement("style"),this.webComponentStyles.innerHTML="\n      :host {\n        all: initial;\n        display: inline;\n      }\n    "}async connectedCallback(){this.shadowRoot.append(this.hideContentStyles),this.shadowRoot.append(...this.childNodes),this.getAttribute("themeId")&&await Hn(this),this.shadowRoot.prepend(this.webComponentStyles),this.shadowRoot.removeChild(this.hideContentStyles)}}customElements.get(nn)||customElements.define(nn,ns);return function({runningExperiences:t=new Map,sendEvent:e=()=>{},sendCustomEvent:n=()=>{},showFlow:r=()=>{},updateUserProfile:i=()=>{},createRenderListener:o=Ni,vNodeHandlers:a=eo,accessibilityHandlers:s=ro}){const c=new Map,u={sendEvent:e,sendCustomEvent:n,showFlow:r,updateUserProfile:i,createRenderListener:o,vNodeHandlers:a,accessibilityHandlers:s},l=t=>t?u?.[t]?u[t]:()=>{throw new Error(`can't find external dependency called ${t}`)}:u,d=e=>{t.has(e)&&(t.get(e).experienceService.send({type:Me}),t.delete(e))};return{registerAction:er,registerTrait:Zn,show:async e=>{await window.customElements.whenDefined(nn);const n=t.get(e.id)?.experienceService??Xt(Ci(e,l),{devTools:false}).start();n.send({type:$e,experience:e}),t.set(e.id,{experienceService:n,experience:e})},stopAll:()=>{t.forEach((t=>{t.experienceService.send({type:Me}),t.experienceService.subscribe((e=>{e.matches("end-final")&&t.experienceService.stop()}))})),t.clear()},stop:d,pause:e=>{if(c.get(e))return;const n=t.get(e);n&&(d(e),c.set(e,{experienceService:n.experienceService,experience:n.experience}))},resume:e=>{const n=c.get(e);n&&(n.experienceService.send({type:$e}),t.set(e,{experienceService:n.experienceService,experience:n.experience}),c.delete(e))},getRunningExperiences:()=>[...t].map((([,{experience:t}])=>t)),isExperiencePaused:t=>c.has(t)}}}();